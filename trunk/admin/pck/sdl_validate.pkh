CREATE OR REPLACE PACKAGE sdl_validate
AS
    --<PACKAGE>
    --   PVCS Identifiers :-
    --
    --       pvcsid           : $Header:   //new_vm_latest/archives/nm3/admin/pck/sdl_validate.pkh-arc   1.2   Oct 11 2019 14:40:54   Rob.Coupe  $
    --       Module Name      : $Workfile:   sdl_validate.pkh  $
    --       Date into PVCS   : $Date:   Oct 11 2019 14:40:54  $
    --       Date fetched Out : $Modtime:   Oct 11 2019 14:38:22  $
    --       PVCS Version     : $Revision:   1.2  $
    --
    --   Author : R.A. Coupe
    --
    --   Package for handling validation of attributes in a load batch
    --
    -----------------------------------------------------------------------------
    -- Copyright (c) 2019 Bentley Systems Incorporated. All rights reserved.
    ----------------------------------------------------------------------------
    -- The main purpose of this package is to handle the validation of all the defined attributes in a batch:
    -- Domain based checks
    -- FK based checks
    -- format checks

    -- assessments of accuracy of network over existing network.
    --</PACKAGE>
    g_sccsid   CONSTANT VARCHAR2 (2000) := '$Revision:   1.2  $';

    -----------------------------------------------------------------------------
    --
    --<PROC NAME="GET_VERSION">
    --
    -- This function returns the current PVCS version of the package

    FUNCTION get_version
        RETURN VARCHAR2;

    --</PROC>

    -----------------------------------------------------------------------------
    --
    --<PROC NAME="GET_BODY_VERSION">
    --
    -- This function returns the current PVCS version of the package body
    FUNCTION get_body_version
        RETURN VARCHAR2;

    --</PROC>

    -----------------------------------------------------------------------------
    --
    --<PROC NAME="VALIDATE_BATCH">
    --
    -- This procedure is a wrapper for smaller validation procedures and removes any residual
    -- validation failures before refreshing them.

    PROCEDURE VALIDATE_BATCH (p_batch_id IN NUMBER);

    --</PROC>

    -----------------------------------------------------------------------------
    --
    --<PROC NAME="VALIDATE_DOMAIN_COLUMNS">
    --
    -- This procedure generates and executes a SQL insert string to log all load records in a batch which have domain-based columns with illegal values.

    PROCEDURE VALIDATE_DOMAIN_COLUMNS (p_batch_id IN NUMBER);

    --</PROC>

    -----------------------------------------------------------------------------
    --
    --<PROC NAME="VALIDATE_MANDATORY_COLUMNS">
    --
    -- This procedure generates and executes a SQL insert string to log all load records in a batch which have mandatory columns without a value

    PROCEDURE VALIDATE_MANDATORY_COLUMNS (p_batch_id IN NUMBER);

    --</PROC>

    -----------------------------------------------------------------------------
    --
    --<PROC NAME="VALIDATE_ADJUSTMENT_RULES">
    --
    -- This function validates the adjustment rules 

    PROCEDURE VALIDATE_ADJUSTMENT_RULES (p_batch_id IN NUMBER);

    -----------------------------------------------------------------------------
    --
    --<PROC NAME="VALIDATE_PROFILE">
    --
    -- This procedure validates the profile

    PROCEDURE VALIDATE_PROFILE (p_template_id IN NUMBER);

    --</PROC>

    PROCEDURE set_working_geometry (p_batch_id IN NUMBER, p_unit_factor in number);

    FUNCTION guess_dim_and_gtype (p_batch_id IN NUMBER)
        RETURN NUMBER;

    FUNCTION sdl_set_gtype (p_geom     IN SDO_GEOMETRY,
                            p_gtype    IN NUMBER,
                            p_length   IN NUMBER DEFAULT NULL,
                            p_unit_factor in number )
        RETURN SDO_GEOMETRY;

    PROCEDURE validate_datum_geometry (p_batch_id IN INTEGER);

    PROCEDURE check_self_intersections (p_batch_id IN INTEGER);

    PROCEDURE set_datum_status (p_batch_id IN NUMBER);
    
END sdl_validate;
/
