--
-----------------------------------------------------------------------------
--
--   SCCS Identifiers :-
--
--       sccsid           : @(#)nm3210_nm40_ddl_upg.sql	1.41 01/05/07
--       Module Name      : nm3210_nm40_ddl_upg.sql
--       Date into SCCS   : 07/01/05 14:12:04
--       Date fetched Out : 07/06/13 13:58:06
--       SCCS Version     : 1.41
--
--   Product upgrade script
--   Note: nm3210_nm3211_ddl_upg also contains DDL changes that will be ran in at this upgrade
--
-----------------------------------------------------------------------------
--   Copyright (c) 2013 Bentley Systems Incorporated. All rights reserved.
-----------------------------------------------------------------------------
--
--
--
SET ECHO OFF
SET LINESIZE 120
SET HEADING OFF
SET FEEDBACK OFF


---------------------------------------------------------------------------
-- Start of hig_modules Changes - CP
--
ALTER TABLE hig_modules modify (hmo_fastpath_opts VARCHAR2(2000))
/
--
-- End of hig_modules Changes - CP
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- Start of changes for HIG1807/nm3user.pkb Changes   - Paul
--
CREATE GLOBAL TEMPORARY TABLE EXOR_PRODUCT_TXT
(
  HPR_PRODUCT        VARCHAR2(6),
  EXOR_FILE_VERSION  VARCHAR2(20)
)
ON COMMIT PRESERVE ROWS
/
--
-- End of changes for HIG1807/nm3user.pkb Changes   - Paul
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- Start of Directories Changes - Graeme
--
GRANT DROP ANY DIRECTORY TO HIG_ADMIN
/
GRANT CREATE ANY DIRECTORY TO HIG_ADMIN
/

--
-- explicity grant the privs to all users who have HIG_ADMIN - as is done in the "Maintain Roles" module HIG1836
--
set serveroutput on size 99999
BEGIN
  FOR i IN (select grantee  from   dba_role_privs where  granted_role = 'HIG_ADMIN') LOOP
    BEGIN
      execute immediate ('GRANT DROP ANY DIRECTORY TO '||i.grantee);
      execute immediate ('GRANT CREATE ANY DIRECTORY TO '||i.grantee);   
    EXCEPTION
     WHEN others THEN
       dbms_output.put_line('Problem granting directory privs to '||i.grantee||chr(10)||sqlerrm||chr(10));
    END;
  END LOOP;
END;
/

CREATE TABLE hig_directories(hdir_name VARCHAR2(30)      NOT NULL
                            ,hdir_path VARCHAR2(4000)    NOT NULL
                            ,hdir_url  VARCHAR2(500)
                            ,hdir_comments VARCHAR2(4000)
                            ,hdir_protected VARCHAR2(1)  DEFAULT 'N' NOT NULL 
                             )
/
ALTER TABLE hig_directories ADD (
  CONSTRAINT HDIR_PK PRIMARY KEY (hdir_name))
/
CREATE TABLE hig_directory_roles
(
  HDR_NAME   VARCHAR2(30)                 NOT NULL,
  HDR_ROLE   VARCHAR2(30)                 NOT NULL,
  HDR_MODE   VARCHAR2(10)                 NOT NULL
)
/
ALTER TABLE HIG_DIRECTORY_ROLES ADD (
  CONSTRAINT HDR_PK PRIMARY KEY (HDR_NAME, HDR_ROLE))
/
ALTER TABLE HIG_DIRECTORY_ROLES ADD (
  CONSTRAINT HDR_HDIR_FK FOREIGN KEY (HDR_NAME)
    REFERENCES HIG_DIRECTORIES (HDIR_NAME)
    ON DELETE CASCADE)
/
ALTER TABLE HIG_DIRECTORY_ROLES ADD (
  CONSTRAINT HDR_HRO_FK FOREIGN KEY (HDR_ROLE)
    REFERENCES HIG_ROLES (HRO_ROLE)
    ON DELETE CASCADE)
/
--
-- End of Directories Changes - Graeme
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- Start of Financial Years changes - Graeme
-- Need to wrap this up in a procedure and handle object already exists cos
-- the table was previously installed with MAI so could already exist at some
-- customer sites
DECLARE
  ex_exists exception;
  pragma exception_init(ex_exists,-955);
BEGIN

 EXECUTE IMMEDIATE('
CREATE TABLE FINANCIAL_YEARS
 (FYR_ID VARCHAR2(5) NOT NULL
 ,FYR_START_DATE DATE NOT NULL
 ,FYR_END_DATE DATE NOT NULL
 )');
 
 EXECUTE IMMEDIATE('COMMENT ON TABLE FINANCIAL_YEARS IS ''Valid Years and their date ranges''');

EXCEPTION
 WHEN ex_exists THEN
    Null;
 WHEN others THEN
    RAISE_APPLICATION_ERROR(-20001,sqlerrm);
END;
/


ALTER TABLE FINANCIAL_YEARS ADD (CONSTRAINT FYR_PK PRIMARY KEY (FYR_ID))
/
ALTER TABLE FINANCIAL_YEARS ADD (CONSTRAINT FYR_CHK1 CHECK (fyr_start_date<fyr_end_date))
/
--
-- End of Financial Years Changes - Graeme
---------------------------------------------------------------------------



---------------------------------------------------------------------------
-- Start of Changes driven by NSG Data Manager requirements
--
-- NE_DESCR 240 CHARS
--
alter table nm_elements_all
modify(ne_descr VARCHAR2(240))
/
CREATE INDEX NE_DESCR_IND
ON NM_ELEMENTS_ALL(NE_NT_TYPE,NE_DESCR)
/
--
-- NM_TYPE_XREFS MOVED TO COR AND SIMPLIFIED
--
DECLARE
 ex_no_bother EXCEPTION;
 pragma exception_init(ex_no_bother,-942);
BEGIN
 EXECUTE IMMEDIATE ('DROP TABLE NM_TYPE_XREFS CASCADE CONSTRAINTS');
EXCEPTION
  WHEN ex_no_bother THEN 
   Null;
END; 
/
CREATE TABLE NM_TYPE_XREFS
(
  NTX_RELATIONSHIP_TYPE  VARCHAR2(30)      NOT NULL
 ,NTX_NT_TYPE1           VARCHAR2(4)       NOT NULL
 ,NTX_GTY_TYPE1          VARCHAR2(4)
 ,NTX_NT_TYPE2           VARCHAR2(4)       NOT NULL
 ,NTX_GTY_TYPE2          VARCHAR2(4)
)
/
ALTER TABLE NM_TYPE_XREFS ADD (
  CONSTRAINT NM_TYPE_XREFS_FK FOREIGN KEY (NTX_NT_TYPE1) 
    REFERENCES NM_TYPES (NT_TYPE))
/
ALTER TABLE NM_TYPE_XREFS ADD (
  CONSTRAINT NM_TYPE_XREFS_FK0 FOREIGN KEY (NTX_NT_TYPE2) 
    REFERENCES NM_TYPES (NT_TYPE))
/
ALTER TABLE NM_TYPE_XREFS ADD (
  CONSTRAINT NM_TYPE_XREFS_FK1 FOREIGN KEY (NTX_GTY_TYPE1) 
    REFERENCES NM_GROUP_TYPES_ALL (NGT_GROUP_TYPE))
/
ALTER TABLE NM_TYPE_XREFS ADD (
  CONSTRAINT NM_TYPE_XREFS_FK2 FOREIGN KEY (NTX_GTY_TYPE2) 
    REFERENCES NM_GROUP_TYPES_ALL (NGT_GROUP_TYPE))
/	
--
-- NM_ELEMENT_XREFS MOVED TO CORE AND SIMPLIFIED
--
DECLARE
 ex_no_bother EXCEPTION;
 pragma exception_init(ex_no_bother,-4043);
BEGIN
 EXECUTE IMMEDIATE('RENAME NM_ELEMENT_XREFS TO NM_ELEMENT_XREFS_3210');
 EXECUTE IMMEDIATE('ALTER TABLE NM_ELEMENT_XREFS_3210 DROP CONSTRAINT NM_ELEMENT_XREFS_FK');
 EXECUTE IMMEDIATE('ALTER TABLE NM_ELEMENT_XREFS_3210 DROP CONSTRAINT NM_ELEMENT_XREFS_FK0');
EXCEPTION
  WHEN ex_no_bother THEN 
   Null;
END;
/
CREATE TABLE NM_ELEMENT_XREFS
(
  NEX_RELATIONSHIP_TYPE  VARCHAR2(30)      NOT NULL,
  NEX_ID1                NUMBER(9)         NOT NULL,
  NEX_ID2                NUMBER(9)         NOT NULL
)
/
ALTER TABLE NM_ELEMENT_XREFS ADD (
CONSTRAINT NEX_PK PRIMARY KEY (NEX_RELATIONSHIP_TYPE, NEX_ID1, NEX_ID2))
/
ALTER TABLE NM_ELEMENT_XREFS ADD (
CONSTRAINT NM_ELEMENT_XREFS_FK FOREIGN KEY (NEX_ID1) 
REFERENCES NM_ELEMENTS_ALL (NE_ID)
ON DELETE CASCADE)
/	
ALTER TABLE NM_ELEMENT_XREFS ADD (
CONSTRAINT NM_ELEMENT_XREFS_FK0 FOREIGN KEY (NEX_ID2) 
REFERENCES NM_ELEMENTS_ALL (NE_ID)
ON DELETE CASCADE)
/

--
-- New table to lock NSGN network type out of NM0105, NM0110 and NM0115
--
CREATE TABLE NM_TYPE_SPECIFIC_MODULES
(
  NTSM_NT_TYPE     VARCHAR2(4)             NOT NULL,
  NTSM_HMO_MODULE  VARCHAR2(30)            NOT NULL
)
/
ALTER TABLE NM_TYPE_SPECIFIC_MODULES ADD (
  CONSTRAINT NTSM_PK PRIMARY KEY (NTSM_NT_TYPE, NTSM_HMO_MODULE))
/  

ALTER TABLE NM_TYPE_SPECIFIC_MODULES ADD 
CONSTRAINT NTSM_HMO_FK
 FOREIGN KEY (NTSM_HMO_MODULE)
 REFERENCES HIG_MODULES (HMO_MODULE) ON DELETE CASCADE
/ 

-- 
-- End of Changes driven by NSG Data Manager requirements
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- Start of product/user option changes
--
ALTER TABLE hig_option_list
ADD (hol_user_option VARCHAR2(1))
/
ALTER TABLE HIG_OPTION_LIST ADD (
  CONSTRAINT HOL_USER_OPTION_CHK CHECK (HOL_USER_OPTION IN ('Y','N')))
/
DECLARE
 ex_no_bother EXCEPTION;
 pragma exception_init(ex_no_bother,-4080);
BEGIN
 EXECUTE IMMEDIATE ('ALTER TRIGGER hol_b_u_trg DISABLE');
EXCEPTION
  WHEN ex_no_bother THEN 
   Null;
END; 
/ 
UPDATE hig_option_list
SET hol_user_option = 'Y'
WHERE EXISTS (SELECT 'x'
              FROM hig_codes
              WHERE hco_domain = 'USER_OPTIONS'
              AND  hco_code = hol_id)
/		  
UPDATE hig_option_list
SET hol_user_option = 'N'
WHERE hol_user_option IS NULL
/
COMMIT
/
ALTER TABLE hig_option_list modify (hol_user_option DEFAULT 'N' NOT NULL)
/
DECLARE
 ex_no_bother EXCEPTION;
 pragma exception_init(ex_no_bother,-4080);
BEGIN
 EXECUTE IMMEDIATE ('ALTER TRIGGER hol_b_u_trg ENABLE');
EXCEPTION
  WHEN ex_no_bother THEN 
   Null;
END; 
/ 

-- CP 27/04/2006
-- Added version of ddl generated from designer into this script
-- Also, added constraints, removed an index
--
CREATE TABLE HIG_USER_OPTION_LIST
 (HUOL_ID VARCHAR2(10) NOT NULL
 ,HUOL_PRODUCT VARCHAR2(6) NOT NULL
 ,HUOL_NAME VARCHAR2(30) NOT NULL
 ,HUOL_REMARKS VARCHAR2(2000) NOT NULL
 ,HUOL_DOMAIN VARCHAR2(20)
 ,HUOL_DATATYPE VARCHAR2(8) DEFAULT 'VARCHAR2' NOT NULL
 ,HUOL_MIXED_CASE VARCHAR2(1) DEFAULT 'N' NOT NULL
 )
/
ALTER TABLE HIG_USER_OPTION_LIST
 ADD (CONSTRAINT HUOL_PK PRIMARY KEY 
  (HUOL_ID))
/
ALTER TABLE HIG_USER_OPTION_LIST ADD (CONSTRAINT
 HUOL_HPR_FK FOREIGN KEY 
  (HUOL_PRODUCT) REFERENCES HIG_PRODUCTS
  (HPR_PRODUCT))
/
CREATE INDEX HUOL_HPR_FK_IND ON HIG_USER_OPTION_LIST
 (HUOL_PRODUCT)
/

-- 
-- End of product/user option changes
---------------------------------------------------------------------------


---------------------------------------------------------------------------
-- Start of AD LINK changes
--

--
-- logging table used by ad_tidy_40.sql which is called towards the end of the Atlas upgrade script
--

CREATE TABLE NAD_START_DATE_LOG_TEMP
(
  NAD_IIT_NE_ID       NUMBER,
  NAD_NE_ID           NUMBER,
  NAD_START_DATE_NEW  DATE,
  ERROR_MESSAGE       VARCHAR2(2000)
)
/

ALTER TABLE nm_nw_ad_link_all ADD (nad_nt_type VARCHAR2(4))
/
ALTER TABLE nm_nw_ad_link_all ADD (nad_gty_type VARCHAR2(4))
/
ALTER TABLE nm_nw_ad_link_all ADD (nad_inv_type VARCHAR2(4))
/
ALTER TABLE nm_nw_ad_link_all ADD (nad_primary_ad VARCHAR2(1))
/
DECLARE
 ex_no_bother EXCEPTION;
 pragma exception_init(ex_no_bother,-4080);
BEGIN
 EXECUTE IMMEDIATE ('ALTER TRIGGER nm_nw_ad_link_br DISABLE');
EXCEPTION
  WHEN ex_no_bother THEN 
   Null;
END; 
/ 
 
DECLARE
 ex_no_bother EXCEPTION;
 pragma exception_init(ex_no_bother,-4080);
BEGIN
 EXECUTE IMMEDIATE ('ALTER TRIGGER nm_nw_ad_link_as DISABLE');
EXCEPTION
  WHEN ex_no_bother THEN 
   Null;
END; 
/ 

UPDATE nm_nw_ad_Link_all nadl
SET nad_nt_type = (select nad_nt_type from nm_nw_ad_types typ where typ.nad_id = nadl.nad_id)
   ,nad_gty_type = (select nad_gty_type from nm_nw_ad_types typ where typ.nad_id = nadl.nad_id)
   ,nad_inv_type = (select nad_inv_type from nm_nw_ad_types typ where typ.nad_id = nadl.nad_id)
   ,nad_primary_ad = (select nad_primary_ad from nm_nw_ad_types typ where typ.nad_id = nadl.nad_id)   
/
ALTER TABLE nm_nw_ad_Link_all MODIFY (nad_nt_type NOT NULL)
/
ALTER TABLE nm_nw_ad_Link_all MODIFY (nad_inv_type NOT NULL)
/
ALTER TABLE nm_nw_ad_Link_all MODIFY (nad_primary_ad NOT NULL)
/   
DECLARE
 ex_no_bother EXCEPTION;
 pragma exception_init(ex_no_bother,-4080);
BEGIN
 EXECUTE IMMEDIATE ('ALTER TRIGGER nm_nw_ad_link_br ENABLE');
EXCEPTION
  WHEN ex_no_bother THEN 
   Null;
END; 
/ 
 
DECLARE
 ex_no_bother EXCEPTION;
 pragma exception_init(ex_no_bother,-4080);
BEGIN
 EXECUTE IMMEDIATE ('ALTER TRIGGER nm_nw_ad_link_as ENABLE');
EXCEPTION
  WHEN ex_no_bother THEN 
   Null;
END; 
/ 
CREATE INDEX NAD_NT_GTY_TYPE_IND ON NM_NW_AD_LINK_ALL
(NAD_NT_TYPE, NAD_INV_TYPE)
/
CREATE INDEX NAD_INV_TYPE_IND ON NM_NW_AD_LINK_ALL
(NAD_INV_TYPE)
/
--
-- End of AD LINK changes
---------------------------------------------------------------------------


---------------------------------------------------------------------------
-- Start of Progress Indicator changes
--
CREATE TABLE NM_PROGRESS
(
  PRG_PROGRESS_ID     NUMBER                    NOT NULL,
  PRG_TOTAL_STAGES    NUMBER                    NOT NULL,
  PRG_CURRENT_STAGE   NUMBER                    NOT NULL,
  PRG_OPERATION       VARCHAR2(100),
  PRG_ERROR_MESSAGE   VARCHAR2(1000),
  PRG_TOTAL_COUNT      NUMBER,
  PRG_CURRENT_POSITION  NUMBER
)
/
ALTER TABLE NM_PROGRESS
ADD CONSTRAINT PRG_UK UNIQUE (PRG_PROGRESS_ID)
/

CREATE SEQUENCE prg_id_seq
/
--
-- End of Progress Indicator changes
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- Start of Admin units changes:
-- Support use of address1 for org name and address2 for alias
--
-- CP 05/09/2006 - Recreate index definitions from Designer definitions
--
--
-- GJ 05-OCT-2006
-- Additional Column NAU_EXTERNAL_NAME to cater non-unique names
--
ALTER TABLE NM_ADMIN_UNITS_ALL
ADD (NAU_EXTERNAL_NAME VARCHAR2(80))
/
COMMENT ON COLUMN 
NM_ADMIN_UNITS_ALL.NAU_EXTERNAL_NAME IS 
'Additional name attribute for the admin unit.  To be used in circumstances where admin unit name is not unique within admin type.'
/ 

CREATE INDEX NAU_ADDRESS1_IND ON NM_ADMIN_UNITS_ALL
 (NAU_ADDRESS1)
/
--
CREATE INDEX NAU_ADDRESS2_IND ON NM_ADMIN_UNITS_ALL
 (NAU_ADDRESS2)
/
-- Support use of types in the hierarchy
CREATE INDEX NAU_TYPE_SUBTYPE_IND ON NM_ADMIN_UNITS_ALL
 (NAU_ADMIN_TYPE
 ,NAU_NSTY_SUB_TYPE)
/
--
--
-- End of Admin units changes
---------------------------------------------------------------------------


-----------------------------------------------------------------------------
-- Start of Audit Changes - allow restriction to be applied in audit metadata
--
CREATE TABLE NM_AUDIT_WHEN
(
  NAW_ID           NUMBER                  NOT NULL,
  NAW_TABLE_NAME   VARCHAR2(30)            NOT NULL,
  NAW_COLUMN_NAME  VARCHAR2(30)            NOT NULL,
  NAW_OPERATOR     VARCHAR2(20)            DEFAULT '='                   NOT NULL,
  NAW_CONDITION    VARCHAR2(2000)
)
/

CREATE INDEX NAW_IND1 ON NM_AUDIT_WHEN
(NAW_TABLE_NAME)
/

ALTER TABLE NM_AUDIT_WHEN ADD (
  CONSTRAINT NAW_PK PRIMARY KEY (NAW_ID))
/  


ALTER TABLE NM_AUDIT_WHEN ADD (
  CONSTRAINT NAW_NAT_FK FOREIGN KEY (NAW_TABLE_NAME) 
    REFERENCES NM_AUDIT_TABLES (NAT_TABLE_NAME)
    ON DELETE CASCADE)
/    

CREATE SEQUENCE NAW_ID_SEQ
/
--
-- End of Audit Changes - allow restriction to be applied in audit metadata
-----------------------------------------------------------------------------

-----------------------------------------------------------------------------
-- Start of PMS log 703686 - remove trigger that duplicates a cascade trigger
-- and causes mutating table error
drop trigger nm_ngt_del_nlt_trg
/
--
-- End of PMS log 703686 
-----------------------------------------------------------------------------

--
---------------------------------------------------------------------------------------------------
-- Increase nm_dbug table for better logging of terminal info
-- Corresponds to the latest nm_debug package changes.
ALTER TABLE nm_dbug MODIFY nd_terminal VARCHAR2(250)
/

-----------------------------------------------------------------------------
-- Start of asset maintenance form changes
--
--
CREATE GLOBAL TEMPORARY TABLE NM_ASSET_RESULTS
(
  NAR_JOB_ID                 NUMBER,
  NAR_NE_ID_IN               NUMBER(9)          NOT NULL,
  NAR_INV_TYPE               VARCHAR2(4)   NOT NULL,
  NAR_PLACEMENT_BEGIN_MP     NUMBER,
  NAR_PLACEMENT_END_MP       NUMBER,
  NAR_PRIMARY_KEY            VARCHAR2(50),
  NAR_START_DATE             DATE               DEFAULT TO_DATE('05111605','DDMMYYYY'),
  NAR_DATE_CREATED           DATE,
  NAR_DATE_MODIFIED          DATE,
  NAR_CREATED_BY             VARCHAR2(30),
  NAR_MODIFIED_BY            VARCHAR2(30),
  NAR_ADMIN_UNIT             NUMBER(9),
  NAR_DESCR                  VARCHAR2(40),
  NAR_END_DATE               DATE,
  NAR_FOREIGN_KEY            VARCHAR2(50),
  NAR_LOCATED_BY             NUMBER(9),
  NAR_POSITION               NUMBER,
  NAR_X_COORD                NUMBER,
  NAR_Y_COORD                NUMBER,
  NAR_NUM_ATTRIB16           NUMBER,
  NAR_NUM_ATTRIB17           NUMBER,
  NAR_NUM_ATTRIB18           NUMBER,
  NAR_NUM_ATTRIB19           NUMBER,
  NAR_NUM_ATTRIB20           NUMBER,
  NAR_NUM_ATTRIB21           NUMBER,
  NAR_NUM_ATTRIB22           NUMBER,
  NAR_NUM_ATTRIB23           NUMBER,
  NAR_NUM_ATTRIB24           NUMBER,
  NAR_NUM_ATTRIB25           NUMBER,
  NAR_CHR_ATTRIB26           VARCHAR2(50),
  NAR_CHR_ATTRIB27           VARCHAR2(50),
  NAR_CHR_ATTRIB28           VARCHAR2(50),
  NAR_CHR_ATTRIB29           VARCHAR2(50),
  NAR_CHR_ATTRIB30           VARCHAR2(50),
  NAR_CHR_ATTRIB31           VARCHAR2(50),
  NAR_CHR_ATTRIB32           VARCHAR2(50),
  NAR_CHR_ATTRIB33           VARCHAR2(50),
  NAR_CHR_ATTRIB34           VARCHAR2(50),
  NAR_CHR_ATTRIB35           VARCHAR2(50),
  NAR_CHR_ATTRIB36           VARCHAR2(50),
  NAR_CHR_ATTRIB37           VARCHAR2(50),
  NAR_CHR_ATTRIB38           VARCHAR2(50),
  NAR_CHR_ATTRIB39           VARCHAR2(50),
  NAR_CHR_ATTRIB40           VARCHAR2(50),
  NAR_CHR_ATTRIB41           VARCHAR2(50),
  NAR_CHR_ATTRIB42           VARCHAR2(50),
  NAR_CHR_ATTRIB43           VARCHAR2(50),
  NAR_CHR_ATTRIB44           VARCHAR2(50),
  NAR_CHR_ATTRIB45           VARCHAR2(50),
  NAR_CHR_ATTRIB46           VARCHAR2(50),
  NAR_CHR_ATTRIB47           VARCHAR2(50),
  NAR_CHR_ATTRIB48           VARCHAR2(50),
  NAR_CHR_ATTRIB49           VARCHAR2(50),
  NAR_CHR_ATTRIB50           VARCHAR2(50),
  NAR_CHR_ATTRIB51           VARCHAR2(50),
  NAR_CHR_ATTRIB52           VARCHAR2(50),
  NAR_CHR_ATTRIB53           VARCHAR2(50),
  NAR_CHR_ATTRIB54           VARCHAR2(50),
  NAR_CHR_ATTRIB55           VARCHAR2(50),
  NAR_CHR_ATTRIB56           VARCHAR2(200),
  NAR_CHR_ATTRIB57           VARCHAR2(200),
  NAR_CHR_ATTRIB58           VARCHAR2(200),
  NAR_CHR_ATTRIB59           VARCHAR2(200),
  NAR_CHR_ATTRIB60           VARCHAR2(200),
  NAR_CHR_ATTRIB61           VARCHAR2(200),
  NAR_CHR_ATTRIB62           VARCHAR2(200),
  NAR_CHR_ATTRIB63           VARCHAR2(200),
  NAR_CHR_ATTRIB64           VARCHAR2(200),
  NAR_CHR_ATTRIB65           VARCHAR2(200),
  NAR_CHR_ATTRIB66           VARCHAR2(500),
  NAR_CHR_ATTRIB67           VARCHAR2(500),
  NAR_CHR_ATTRIB68           VARCHAR2(500),
  NAR_CHR_ATTRIB69           VARCHAR2(500),
  NAR_CHR_ATTRIB70           VARCHAR2(500),
  NAR_CHR_ATTRIB71           VARCHAR2(500),
  NAR_CHR_ATTRIB72           VARCHAR2(500),
  NAR_CHR_ATTRIB73           VARCHAR2(500),
  NAR_CHR_ATTRIB74           VARCHAR2(500),
  NAR_CHR_ATTRIB75           VARCHAR2(500),
  NAR_NUM_ATTRIB76           NUMBER,
  NAR_NUM_ATTRIB77           NUMBER,
  NAR_NUM_ATTRIB78           NUMBER,
  NAR_NUM_ATTRIB79           NUMBER,
  NAR_NUM_ATTRIB80           NUMBER,
  NAR_NUM_ATTRIB81           NUMBER,
  NAR_NUM_ATTRIB82           NUMBER,
  NAR_NUM_ATTRIB83           NUMBER,
  NAR_NUM_ATTRIB84           NUMBER,
  NAR_NUM_ATTRIB85           NUMBER,
  NAR_DATE_ATTRIB86          DATE,
  NAR_DATE_ATTRIB87          DATE,
  NAR_DATE_ATTRIB88          DATE,
  NAR_DATE_ATTRIB89          DATE,
  NAR_DATE_ATTRIB90          DATE,
  NAR_DATE_ATTRIB91          DATE,
  NAR_DATE_ATTRIB92          DATE,
  NAR_DATE_ATTRIB93          DATE,
  NAR_DATE_ATTRIB94          DATE,
  NAR_DATE_ATTRIB95          DATE,
  NAR_ANGLE                  NUMBER(6,2),
  NAR_ANGLE_TXT              VARCHAR2(20),
  NAR_CLASS                  VARCHAR2(2),
  NAR_CLASS_TXT              VARCHAR2(20),
  NAR_COLOUR                 VARCHAR2(2),
  NAR_COLOUR_TXT             VARCHAR2(20),
  NAR_COORD_FLAG             VARCHAR2(1),
  NAR_DESCRIPTION            VARCHAR2(40),
  NAR_DIAGRAM                VARCHAR2(6),
  NAR_DISTANCE               NUMBER(7,2),
  NAR_END_CHAIN              NUMBER(6),
  NAR_GAP                    NUMBER(6,2),
  NAR_HEIGHT                 NUMBER(6,2),
  NAR_HEIGHT_2               NUMBER(6,2),
  NAR_ID_CODE                VARCHAR2(8),
  NAR_INSTAL_DATE            DATE,
  NAR_INVENT_DATE            DATE,
  NAR_INV_OWNERSHIP          VARCHAR2(4),
  NAR_ITEMCODE               VARCHAR2(8),
  NAR_LCO_LAMP_CONFIG_ID     NUMBER(3),
  NAR_LENGTH                 NUMBER(6),
  NAR_MATERIAL               VARCHAR2(30),
  NAR_MATERIAL_TXT           VARCHAR2(20),
  NAR_METHOD                 VARCHAR2(2),
  NAR_METHOD_TXT             VARCHAR2(20),
  NAR_NOTE                   VARCHAR2(40),
  NAR_NO_OF_UNITS            NUMBER(3),
  NAR_OPTIONS                VARCHAR2(2),
  NAR_OPTIONS_TXT            VARCHAR2(20),
  NAR_OUN_ORG_ID_ELEC_BOARD  NUMBER(8),
  NAR_OWNER                  VARCHAR2(4),
  NAR_OWNER_TXT              VARCHAR2(20),
  NAR_PEO_INVENT_BY_ID       NUMBER(8),
  NAR_PHOTO                  VARCHAR2(6),
  NAR_POWER                  NUMBER(6),
  NAR_PROV_FLAG              VARCHAR2(1),
  NAR_REV_BY                 VARCHAR2(20),
  NAR_REV_DATE               DATE,
  NAR_TYPE                   VARCHAR2(2),
  NAR_TYPE_TXT               VARCHAR2(20),
  NAR_WIDTH                  NUMBER(6,2),
  NAR_XTRA_CHAR_1            VARCHAR2(20),
  NAR_XTRA_DATE_1            DATE,
  NAR_XTRA_DOMAIN_1          VARCHAR2(2),
  NAR_XTRA_DOMAIN_TXT_1      VARCHAR2(20),
  NAR_XTRA_NUMBER_1          NUMBER(10,2),
  NAR_X_SECT                 VARCHAR2(4),
  NAR_DET_XSP                VARCHAR2(4),
  NAR_OFFSET                 NUMBER,
  NAR_X                      NUMBER,
  NAR_Y                      NUMBER,
  NAR_Z                      NUMBER,
  NAR_NUM_ATTRIB96           NUMBER,
  NAR_NUM_ATTRIB97           NUMBER,
  NAR_NUM_ATTRIB98           NUMBER,
  NAR_NUM_ATTRIB99           NUMBER,
  NAR_NUM_ATTRIB100          NUMBER,
  NAR_NUM_ATTRIB101          NUMBER,
  NAR_NUM_ATTRIB102          NUMBER,
  NAR_NUM_ATTRIB103          NUMBER,
  NAR_NUM_ATTRIB104          NUMBER,
  NAR_NUM_ATTRIB105          NUMBER,
  NAR_NUM_ATTRIB106          NUMBER,
  NAR_NUM_ATTRIB107          NUMBER,
  NAR_NUM_ATTRIB108          NUMBER,
  NAR_NUM_ATTRIB109          NUMBER,
  NAR_NUM_ATTRIB110          NUMBER,
  NAR_NUM_ATTRIB111          NUMBER,
  NAR_NUM_ATTRIB112          NUMBER,
  NAR_NUM_ATTRIB113          NUMBER,
  NAR_NUM_ATTRIB114          NUMBER,
  NAR_NUM_ATTRIB115          NUMBER
)
ON COMMIT PRESERVE ROWS
NOCACHE
/
-- end of asset maintenance form changes
-----------------------------------------------------------------------------
-- START of Network reports global temporary tables

CREATE GLOBAL TEMPORARY TABLE NM_NM0150
(
  NM_NE_ID_OF     NUMBER(9),
  NM_BEGIN_MP     NUMBER,
  NM_END_MP       NUMBER,
  NM_CARDINALITY  NUMBER,
  NE_UNIQUE       VARCHAR2(30),
  NE_NT_TYPE      VARCHAR2(4),
  NE_DESCR        VARCHAR2(240),
  NE_NO_START     NUMBER,
  NE_NO_END       NUMBER
)
ON COMMIT PRESERVE ROWS;


CREATE GLOBAL TEMPORARY TABLE NM_NM0151
(
  NM_NE_ID_OF     NUMBER(9),
  NM_BEGIN_MP     NUMBER,
  NM_END_MP       NUMBER,
  NM_CARDINALITY  NUMBER,
  NE_UNIQUE       VARCHAR2(30),
  NE_NT_TYPE      VARCHAR2(4),
  NE_DESCR        VARCHAR2(240),
  NE_NO_START     NUMBER,
  NE_NO_END       NUMBER
)
ON COMMIT PRESERVE ROWS;


CREATE GLOBAL TEMPORARY TABLE NM_NM0153
(
  NM_NE_ID_OF     NUMBER(9),
  NM_BEGIN_MP     NUMBER,
  NM_END_MP       NUMBER,
  NM_CARDINALITY  NUMBER,
  NE_UNIQUE       VARCHAR2(30),
  NE_NT_TYPE      VARCHAR2(4),
  NE_DESCR        VARCHAR2(240),
  NE_NO_START     NUMBER,
  NE_NO_END       NUMBER
)
ON COMMIT PRESERVE ROWS;

CREATE GLOBAL TEMPORARY TABLE NM_NM0154
(
  NE_ID        NUMBER,
  NE_UNIQUE    VARCHAR2(30),
  NE_DESCR     VARCHAR2(240),
  NE_LENGTH    NUMBER,
  NE_TOTAL     NUMBER,
  NM_NE_ID_IN  NUMBER,
  NM_NE_ID_OF  NUMBER,
  NE_TYPE      VARCHAR2(3)
)
ON COMMIT PRESERVE ROWS;

-- END of Network reports global temporary tables
-----------------------------------------------------------------------------

-----------------------------------------------------------------------------
-- Start of PMS log 704525 - remove constraint that if enabled causes
-- reports to not run with a constraint error - Chris
alter table gri_run_parameters drop constraint grp_fk_grr
/
--
-- End of PMS log 704525 
-----------------------------------------------------------------------------

-----------------------------------------------------------------------------
-- Start of PMS logs 703952/704320


drop TABLE NM_MRG_QUERY_RESULTS_TEMP ;
CREATE GLOBAL TEMPORARY TABLE NM_MRG_QUERY_RESULTS_TEMP
 (NE_ID NUMBER NOT NULL
 ,INV_TYPE VARCHAR2(30) NOT NULL
 ,X_SECT VARCHAR2(4)
 ,PNT_OR_CONT VARCHAR2(1) NOT NULL
 ,ATTRIB1 VARCHAR2(500)
 ,ATTRIB2 VARCHAR2(500)
 ,ATTRIB3 VARCHAR2(500)
 ,ATTRIB4 VARCHAR2(500)
 ,ATTRIB5 VARCHAR2(500)
 ,ATTRIB6 VARCHAR2(500)
 ,ATTRIB7 VARCHAR2(500)
 ,ATTRIB8 VARCHAR2(500)
 ,ATTRIB9 VARCHAR2(500)
 ,ATTRIB10 VARCHAR2(500)
 ,ATTRIB11 VARCHAR2(500)
 ,ATTRIB12 VARCHAR2(500)
 ,ATTRIB13 VARCHAR2(500)
 ,ATTRIB14 VARCHAR2(500)
 ,ATTRIB15 VARCHAR2(500)
 ,ATTRIB16 VARCHAR2(500)
 ,ATTRIB17 VARCHAR2(500)
 ,ATTRIB18 VARCHAR2(500)
 ,ATTRIB19 VARCHAR2(500)
 ,ATTRIB20 VARCHAR2(500)
 ,ATTRIB21 VARCHAR2(500)
 ,ATTRIB22 VARCHAR2(500)
 ,ATTRIB23 VARCHAR2(500)
 ,ATTRIB24 VARCHAR2(500)
 ,ATTRIB25 VARCHAR2(500)
 ,ATTRIB26 VARCHAR2(500)
 ,ATTRIB27 VARCHAR2(500)
 ,ATTRIB28 VARCHAR2(500)
 ,ATTRIB29 VARCHAR2(500)
 ,ATTRIB30 VARCHAR2(500)
 ,ATTRIB31 VARCHAR2(500)
 ,ATTRIB32 VARCHAR2(500)
 ,ATTRIB33 VARCHAR2(500)
 ,ATTRIB34 VARCHAR2(500)
 ,ATTRIB35 VARCHAR2(500)
 ,ATTRIB36 VARCHAR2(500)
 ,ATTRIB37 VARCHAR2(500)
 ,ATTRIB38 VARCHAR2(500)
 ,ATTRIB39 VARCHAR2(500)
 ,ATTRIB40 VARCHAR2(500)
 ,ATTRIB41 VARCHAR2(500)
 ,ATTRIB42 VARCHAR2(500)
 ,ATTRIB43 VARCHAR2(500)
 ,ATTRIB44 VARCHAR2(500)
 ,ATTRIB45 VARCHAR2(500)
 ,ATTRIB46 VARCHAR2(500)
 ,ATTRIB47 VARCHAR2(500)
 ,ATTRIB48 VARCHAR2(500)
 ,ATTRIB49 VARCHAR2(500)
 ,ATTRIB50 VARCHAR2(500)
 ,ATTRIB51 VARCHAR2(500)
 ,ATTRIB52 VARCHAR2(500)
 ,ATTRIB53 VARCHAR2(500)
 ,ATTRIB54 VARCHAR2(500)
 ,ATTRIB55 VARCHAR2(500)
 ,ATTRIB56 VARCHAR2(500)
 ,ATTRIB57 VARCHAR2(500)
 ,ATTRIB58 VARCHAR2(500)
 ,ATTRIB59 VARCHAR2(500)
 ,ATTRIB60 VARCHAR2(500)
 ,ATTRIB61 VARCHAR2(500)
 ,ATTRIB62 VARCHAR2(500)
 ,ATTRIB63 VARCHAR2(500)
 ,ATTRIB64 VARCHAR2(500)
 ,ATTRIB65 VARCHAR2(500)
 ,ATTRIB66 VARCHAR2(500)
 ,ATTRIB67 VARCHAR2(500)
 ,ATTRIB68 VARCHAR2(500)
 ,ATTRIB69 VARCHAR2(500)
 ,ATTRIB70 VARCHAR2(500)
 ,ATTRIB71 VARCHAR2(500)
 ,ATTRIB72 VARCHAR2(500)
 ,ATTRIB73 VARCHAR2(500)
 ,ATTRIB74 VARCHAR2(500)
 ,ATTRIB75 VARCHAR2(500)
 ,ATTRIB76 VARCHAR2(500)
 ,ATTRIB77 VARCHAR2(500)
 ,ATTRIB78 VARCHAR2(500)
 ,ATTRIB79 VARCHAR2(500)
 ,ATTRIB80 VARCHAR2(500)
 ,ATTRIB81 VARCHAR2(500)
 ,ATTRIB82 VARCHAR2(500)
 ,ATTRIB83 VARCHAR2(500)
 ,ATTRIB84 VARCHAR2(500)
 ,ATTRIB85 VARCHAR2(500)
 ,ATTRIB86 VARCHAR2(500)
 ,ATTRIB87 VARCHAR2(500)
 ,ATTRIB88 VARCHAR2(500)
 ,ATTRIB89 VARCHAR2(500)
 ,ATTRIB90 VARCHAR2(500)
 ,ATTRIB91 VARCHAR2(500)
 ,ATTRIB92 VARCHAR2(500)
 ,ATTRIB93 VARCHAR2(500)
 ,ATTRIB94 VARCHAR2(500)
 ,ATTRIB95 VARCHAR2(500)
 ,ATTRIB96 VARCHAR2(500)
 ,ATTRIB97 VARCHAR2(500)
 ,ATTRIB98 VARCHAR2(500)
 ,ATTRIB99 VARCHAR2(500)
 ,ATTRIB100 VARCHAR2(500)
 ,ATTRIB101 VARCHAR2(500)
 ,ATTRIB102 VARCHAR2(500)
 ,ATTRIB103 VARCHAR2(500)
 ,ATTRIB104 VARCHAR2(500)
 ,ATTRIB105 VARCHAR2(500)
 ,ATTRIB106 VARCHAR2(500)
 ,ATTRIB107 VARCHAR2(500)
 ,ATTRIB108 VARCHAR2(500)
 ,ATTRIB109 VARCHAR2(500)
 ,ATTRIB110 VARCHAR2(500)
 ,ATTRIB111 VARCHAR2(500)
 ,ATTRIB112 VARCHAR2(500)
 ,ATTRIB113 VARCHAR2(500)
 ,ATTRIB114 VARCHAR2(500)
 ,ATTRIB115 VARCHAR2(500)
 ,ATTRIB116 VARCHAR2(500)
 ,ATTRIB117 VARCHAR2(500)
 ,ATTRIB118 VARCHAR2(500)
 ,ATTRIB119 VARCHAR2(500)
 ,ATTRIB120 VARCHAR2(500)
 ,ATTRIB121 VARCHAR2(500)
 ,ATTRIB122 VARCHAR2(500)
 ,ATTRIB123 VARCHAR2(500)
 ,ATTRIB124 VARCHAR2(500)
 ,ATTRIB125 VARCHAR2(500)
 ,ATTRIB126 VARCHAR2(500)
 ,ATTRIB127 VARCHAR2(500)
 ,ATTRIB128 VARCHAR2(500)
 ,ATTRIB129 VARCHAR2(500)
 ,ATTRIB130 VARCHAR2(500)
 ,ATTRIB131 VARCHAR2(500)
 ,ATTRIB132 VARCHAR2(500)
 ,ATTRIB133 VARCHAR2(500)
 ,ATTRIB134 VARCHAR2(500)
 ,ATTRIB135 VARCHAR2(500)
 ,ATTRIB136 VARCHAR2(500)
 ,ATTRIB137 VARCHAR2(500)
 ,ATTRIB138 VARCHAR2(500)
 ,ATTRIB139 VARCHAR2(500)
 ,ATTRIB140 VARCHAR2(500)
 ,ATTRIB141 VARCHAR2(500)
 ,ATTRIB142 VARCHAR2(500)
 ,ATTRIB143 VARCHAR2(500)
 ,ATTRIB144 VARCHAR2(500)
 ,ATTRIB145 VARCHAR2(500)
 ,ATTRIB146 VARCHAR2(500)
 ,ATTRIB147 VARCHAR2(500)
 ,ATTRIB148 VARCHAR2(500)
 ,ATTRIB149 VARCHAR2(500)
 ,ATTRIB150 VARCHAR2(500)
 ,ATTRIB151 VARCHAR2(500)
 ,ATTRIB152 VARCHAR2(500)
 ,ATTRIB153 VARCHAR2(500)
 ,ATTRIB154 VARCHAR2(500)
 ,ATTRIB155 VARCHAR2(500)
 ,ATTRIB156 VARCHAR2(500)
 ,ATTRIB157 VARCHAR2(500)
 ,ATTRIB158 VARCHAR2(500)
 ,ATTRIB159 VARCHAR2(500)
 ,ATTRIB160 VARCHAR2(500)
 ,ATTRIB161 VARCHAR2(500)
 ,ATTRIB162 VARCHAR2(500)
 ,ATTRIB163 VARCHAR2(500)
 ,ATTRIB164 VARCHAR2(500)
 ,ATTRIB165 VARCHAR2(500)
 ,ATTRIB166 VARCHAR2(500)
 ,ATTRIB167 VARCHAR2(500)
 ,ATTRIB168 VARCHAR2(500)
 ,ATTRIB169 VARCHAR2(500)
 ,ATTRIB170 VARCHAR2(500)
 ,ATTRIB171 VARCHAR2(500)
 ,ATTRIB172 VARCHAR2(500)
 ,ATTRIB173 VARCHAR2(500)
 ,ATTRIB174 VARCHAR2(500)
 ,ATTRIB175 VARCHAR2(500)
 ,ATTRIB176 VARCHAR2(500)
 ,ATTRIB177 VARCHAR2(500)
 ,ATTRIB178 VARCHAR2(500)
 ,ATTRIB179 VARCHAR2(500)
 ,ATTRIB180 VARCHAR2(500)
 ,ATTRIB181 VARCHAR2(500)
 ,ATTRIB182 VARCHAR2(500)
 ,ATTRIB183 VARCHAR2(500)
 ,ATTRIB184 VARCHAR2(500)
 ,ATTRIB185 VARCHAR2(500)
 ,ATTRIB186 VARCHAR2(500)
 ,ATTRIB187 VARCHAR2(500)
 ,ATTRIB188 VARCHAR2(500)
 ,ATTRIB189 VARCHAR2(500)
 ,ATTRIB190 VARCHAR2(500)
 ,ATTRIB191 VARCHAR2(500)
 ,ATTRIB192 VARCHAR2(500)
 ,ATTRIB193 VARCHAR2(500)
 ,ATTRIB194 VARCHAR2(500)
 ,ATTRIB195 VARCHAR2(500)
 ,ATTRIB196 VARCHAR2(500)
 ,ATTRIB197 VARCHAR2(500)
 ,ATTRIB198 VARCHAR2(500)
 ,ATTRIB199 VARCHAR2(500)
 ,ATTRIB200 VARCHAR2(500)
 ,ATTRIB201 VARCHAR2(500)
 ,ATTRIB202 VARCHAR2(500)
 ,ATTRIB203 VARCHAR2(500)
 ,ATTRIB204 VARCHAR2(500)
 ,ATTRIB205 VARCHAR2(500)
 ,ATTRIB206 VARCHAR2(500)
 ,ATTRIB207 VARCHAR2(500)
 ,ATTRIB208 VARCHAR2(500)
 ,ATTRIB209 VARCHAR2(500)
 ,ATTRIB210 VARCHAR2(500)
 ,ATTRIB211 VARCHAR2(500)
 ,ATTRIB212 VARCHAR2(500)
 ,ATTRIB213 VARCHAR2(500)
 ,ATTRIB214 VARCHAR2(500)
 ,ATTRIB215 VARCHAR2(500)
 ,ATTRIB216 VARCHAR2(500)
 ,ATTRIB217 VARCHAR2(500)
 ,ATTRIB218 VARCHAR2(500)
 ,ATTRIB219 VARCHAR2(500)
 ,ATTRIB220 VARCHAR2(500)
 ,ATTRIB221 VARCHAR2(500)
 ,ATTRIB222 VARCHAR2(500)
 ,ATTRIB223 VARCHAR2(500)
 ,ATTRIB224 VARCHAR2(500)
 ,ATTRIB225 VARCHAR2(500)
 ,ATTRIB226 VARCHAR2(500)
 ,ATTRIB227 VARCHAR2(500)
 ,ATTRIB228 VARCHAR2(500)
 ,ATTRIB229 VARCHAR2(500)
 ,ATTRIB230 VARCHAR2(500)
 ,ATTRIB231 VARCHAR2(500)
 ,ATTRIB232 VARCHAR2(500)
 ,ATTRIB233 VARCHAR2(500)
 ,ATTRIB234 VARCHAR2(500)
 ,ATTRIB235 VARCHAR2(500)
 ,ATTRIB236 VARCHAR2(500)
 ,ATTRIB237 VARCHAR2(500)
 ,ATTRIB238 VARCHAR2(500)
 ,ATTRIB239 VARCHAR2(500)
 ,ATTRIB240 VARCHAR2(500)
 ,ATTRIB241 VARCHAR2(500)
 ,ATTRIB242 VARCHAR2(500)
 ,ATTRIB243 VARCHAR2(500)
 ,ATTRIB244 VARCHAR2(500)
 ,ATTRIB245 VARCHAR2(500)
 ,ATTRIB246 VARCHAR2(500)
 ,ATTRIB247 VARCHAR2(500)
 ,ATTRIB248 VARCHAR2(500)
 ,ATTRIB249 VARCHAR2(500)
 ,ATTRIB250 VARCHAR2(500)
 ,ATTRIB251 VARCHAR2(500)
 ,ATTRIB252 VARCHAR2(500)
 ,ATTRIB253 VARCHAR2(500)
 ,ATTRIB254 VARCHAR2(500)
 ,ATTRIB255 VARCHAR2(500)
 ,ATTRIB256 VARCHAR2(500)
 ,ATTRIB257 VARCHAR2(500)
 ,ATTRIB258 VARCHAR2(500)
 ,ATTRIB259 VARCHAR2(500)
 ,ATTRIB260 VARCHAR2(500)
 ,ATTRIB261 VARCHAR2(500)
 ,ATTRIB262 VARCHAR2(500)
 ,ATTRIB263 VARCHAR2(500)
 ,ATTRIB264 VARCHAR2(500)
 ,ATTRIB265 VARCHAR2(500)
 ,ATTRIB266 VARCHAR2(500)
 ,ATTRIB267 VARCHAR2(500)
 ,ATTRIB268 VARCHAR2(500)
 ,ATTRIB269 VARCHAR2(500)
 ,ATTRIB270 VARCHAR2(500)
 ,ATTRIB271 VARCHAR2(500)
 ,ATTRIB272 VARCHAR2(500)
 ,ATTRIB273 VARCHAR2(500)
 ,ATTRIB274 VARCHAR2(500)
 ,ATTRIB275 VARCHAR2(500)
 ,ATTRIB276 VARCHAR2(500)
 ,ATTRIB277 VARCHAR2(500)
 ,ATTRIB278 VARCHAR2(500)
 ,ATTRIB279 VARCHAR2(500)
 ,ATTRIB280 VARCHAR2(500)
 ,ATTRIB281 VARCHAR2(500)
 ,ATTRIB282 VARCHAR2(500)
 ,ATTRIB283 VARCHAR2(500)
 ,ATTRIB284 VARCHAR2(500)
 ,ATTRIB285 VARCHAR2(500)
 ,ATTRIB286 VARCHAR2(500)
 ,ATTRIB287 VARCHAR2(500)
 ,ATTRIB288 VARCHAR2(500)
 ,ATTRIB289 VARCHAR2(500)
 ,ATTRIB290 VARCHAR2(500)
 ,ATTRIB291 VARCHAR2(500)
 ,ATTRIB292 VARCHAR2(500)
 ,ATTRIB293 VARCHAR2(500)
 ,ATTRIB294 VARCHAR2(500)
 ,ATTRIB295 VARCHAR2(500)
 ,ATTRIB296 VARCHAR2(500)
 ,ATTRIB297 VARCHAR2(500)
 ,ATTRIB298 VARCHAR2(500)
 ,ATTRIB299 VARCHAR2(500)
 ,ATTRIB300 VARCHAR2(500)
 ,ATTRIB301 VARCHAR2(500)
 ,ATTRIB302 VARCHAR2(500)
 ,ATTRIB303 VARCHAR2(500)
 ,ATTRIB304 VARCHAR2(500)
 ,ATTRIB305 VARCHAR2(500)
 ,ATTRIB306 VARCHAR2(500)
 ,ATTRIB307 VARCHAR2(500)
 ,ATTRIB308 VARCHAR2(500)
 ,ATTRIB309 VARCHAR2(500)
 ,ATTRIB310 VARCHAR2(500)
 ,ATTRIB311 VARCHAR2(500)
 ,ATTRIB312 VARCHAR2(500)
 ,ATTRIB313 VARCHAR2(500)
 ,ATTRIB314 VARCHAR2(500)
 ,ATTRIB315 VARCHAR2(500)
 ,ATTRIB316 VARCHAR2(500)
 ,ATTRIB317 VARCHAR2(500)
 ,ATTRIB318 VARCHAR2(500)
 ,ATTRIB319 VARCHAR2(500)
 ,ATTRIB320 VARCHAR2(500)
 ,ATTRIB321 VARCHAR2(500)
 ,ATTRIB322 VARCHAR2(500)
 ,ATTRIB323 VARCHAR2(500)
 ,ATTRIB324 VARCHAR2(500)
 ,ATTRIB325 VARCHAR2(500)
 ,ATTRIB326 VARCHAR2(500)
 ,ATTRIB327 VARCHAR2(500)
 ,ATTRIB328 VARCHAR2(500)
 ,ATTRIB329 VARCHAR2(500)
 ,ATTRIB330 VARCHAR2(500)
 ,ATTRIB331 VARCHAR2(500)
 ,ATTRIB332 VARCHAR2(500)
 ,ATTRIB333 VARCHAR2(500)
 ,ATTRIB334 VARCHAR2(500)
 ,ATTRIB335 VARCHAR2(500)
 ,ATTRIB336 VARCHAR2(500)
 ,ATTRIB337 VARCHAR2(500)
 ,ATTRIB338 VARCHAR2(500)
 ,ATTRIB339 VARCHAR2(500)
 ,ATTRIB340 VARCHAR2(500)
 ,ATTRIB341 VARCHAR2(500)
 ,ATTRIB342 VARCHAR2(500)
 ,ATTRIB343 VARCHAR2(500)
 ,ATTRIB344 VARCHAR2(500)
 ,ATTRIB345 VARCHAR2(500)
 ,ATTRIB346 VARCHAR2(500)
 ,ATTRIB347 VARCHAR2(500)
 ,ATTRIB348 VARCHAR2(500)
 ,ATTRIB349 VARCHAR2(500)
 ,ATTRIB350 VARCHAR2(500)
 ,ATTRIB351 VARCHAR2(500)
 ,ATTRIB352 VARCHAR2(500)
 ,ATTRIB353 VARCHAR2(500)
 ,ATTRIB354 VARCHAR2(500)
 ,ATTRIB355 VARCHAR2(500)
 ,ATTRIB356 VARCHAR2(500)
 ,ATTRIB357 VARCHAR2(500)
 ,ATTRIB358 VARCHAR2(500)
 ,ATTRIB359 VARCHAR2(500)
 ,ATTRIB360 VARCHAR2(500)
 ,ATTRIB361 VARCHAR2(500)
 ,ATTRIB362 VARCHAR2(500)
 ,ATTRIB363 VARCHAR2(500)
 ,ATTRIB364 VARCHAR2(500)
 ,ATTRIB365 VARCHAR2(500)
 ,ATTRIB366 VARCHAR2(500)
 ,ATTRIB367 VARCHAR2(500)
 ,ATTRIB368 VARCHAR2(500)
 ,ATTRIB369 VARCHAR2(500)
 ,ATTRIB370 VARCHAR2(500)
 ,ATTRIB371 VARCHAR2(500)
 ,ATTRIB372 VARCHAR2(500)
 ,ATTRIB373 VARCHAR2(500)
 ,ATTRIB374 VARCHAR2(500)
 ,ATTRIB375 VARCHAR2(500)
 ,ATTRIB376 VARCHAR2(500)
 ,ATTRIB377 VARCHAR2(500)
 ,ATTRIB378 VARCHAR2(500)
 ,ATTRIB379 VARCHAR2(500)
 ,ATTRIB380 VARCHAR2(500)
 ,ATTRIB381 VARCHAR2(500)
 ,ATTRIB382 VARCHAR2(500)
 ,ATTRIB383 VARCHAR2(500)
 ,ATTRIB384 VARCHAR2(500)
 ,ATTRIB385 VARCHAR2(500)
 ,ATTRIB386 VARCHAR2(500)
 ,ATTRIB387 VARCHAR2(500)
 ,ATTRIB388 VARCHAR2(500)
 ,ATTRIB389 VARCHAR2(500)
 ,ATTRIB390 VARCHAR2(500)
 ,ATTRIB391 VARCHAR2(500)
 ,ATTRIB392 VARCHAR2(500)
 ,ATTRIB393 VARCHAR2(500)
 ,ATTRIB394 VARCHAR2(500)
 ,ATTRIB395 VARCHAR2(500)
 ,ATTRIB396 VARCHAR2(500)
 ,ATTRIB397 VARCHAR2(500)
 ,ATTRIB398 VARCHAR2(500)
 ,ATTRIB399 VARCHAR2(500)
 ,ATTRIB400 VARCHAR2(500)
 ,ATTRIB401 VARCHAR2(500)
 ,ATTRIB402 VARCHAR2(500)
 ,ATTRIB403 VARCHAR2(500)
 ,ATTRIB404 VARCHAR2(500)
 ,ATTRIB405 VARCHAR2(500)
 ,ATTRIB406 VARCHAR2(500)
 ,ATTRIB407 VARCHAR2(500)
 ,ATTRIB408 VARCHAR2(500)
 ,ATTRIB409 VARCHAR2(500)
 ,ATTRIB410 VARCHAR2(500)
 ,ATTRIB411 VARCHAR2(500)
 ,ATTRIB412 VARCHAR2(500)
 ,ATTRIB413 VARCHAR2(500)
 ,ATTRIB414 VARCHAR2(500)
 ,ATTRIB415 VARCHAR2(500)
 ,ATTRIB416 VARCHAR2(500)
 ,ATTRIB417 VARCHAR2(500)
 ,ATTRIB418 VARCHAR2(500)
 ,ATTRIB419 VARCHAR2(500)
 ,ATTRIB420 VARCHAR2(500)
 ,ATTRIB421 VARCHAR2(500)
 ,ATTRIB422 VARCHAR2(500)
 ,ATTRIB423 VARCHAR2(500)
 ,ATTRIB424 VARCHAR2(500)
 ,ATTRIB425 VARCHAR2(500)
 ,ATTRIB426 VARCHAR2(500)
 ,ATTRIB427 VARCHAR2(500)
 ,ATTRIB428 VARCHAR2(500)
 ,ATTRIB429 VARCHAR2(500)
 ,ATTRIB430 VARCHAR2(500)
 ,ATTRIB431 VARCHAR2(500)
 ,ATTRIB432 VARCHAR2(500)
 ,ATTRIB433 VARCHAR2(500)
 ,ATTRIB434 VARCHAR2(500)
 ,ATTRIB435 VARCHAR2(500)
 ,ATTRIB436 VARCHAR2(500)
 ,ATTRIB437 VARCHAR2(500)
 ,ATTRIB438 VARCHAR2(500)
 ,ATTRIB439 VARCHAR2(500)
 ,ATTRIB440 VARCHAR2(500)
 ,ATTRIB441 VARCHAR2(500)
 ,ATTRIB442 VARCHAR2(500)
 ,ATTRIB443 VARCHAR2(500)
 ,ATTRIB444 VARCHAR2(500)
 ,ATTRIB445 VARCHAR2(500)
 ,ATTRIB446 VARCHAR2(500)
 ,ATTRIB447 VARCHAR2(500)
 ,ATTRIB448 VARCHAR2(500)
 ,ATTRIB449 VARCHAR2(500)
 ,ATTRIB450 VARCHAR2(500)
 ,ATTRIB451 VARCHAR2(500)
 ,ATTRIB452 VARCHAR2(500)
 ,ATTRIB453 VARCHAR2(500)
 ,ATTRIB454 VARCHAR2(500)
 ,ATTRIB455 VARCHAR2(500)
 ,ATTRIB456 VARCHAR2(500)
 ,ATTRIB457 VARCHAR2(500)
 ,ATTRIB458 VARCHAR2(500)
 ,ATTRIB459 VARCHAR2(500)
 ,ATTRIB460 VARCHAR2(500)
 ,ATTRIB461 VARCHAR2(500)
 ,ATTRIB462 VARCHAR2(500)
 ,ATTRIB463 VARCHAR2(500)
 ,ATTRIB464 VARCHAR2(500)
 ,ATTRIB465 VARCHAR2(500)
 ,ATTRIB466 VARCHAR2(500)
 ,ATTRIB467 VARCHAR2(500)
 ,ATTRIB468 VARCHAR2(500)
 ,ATTRIB469 VARCHAR2(500)
 ,ATTRIB470 VARCHAR2(500)
 ,ATTRIB471 VARCHAR2(500)
 ,ATTRIB472 VARCHAR2(500)
 ,ATTRIB473 VARCHAR2(500)
 ,ATTRIB474 VARCHAR2(500)
 ,ATTRIB475 VARCHAR2(500)
 ,ATTRIB476 VARCHAR2(500)
 ,ATTRIB477 VARCHAR2(500)
 ,ATTRIB478 VARCHAR2(500)
 ,ATTRIB479 VARCHAR2(500)
 ,ATTRIB480 VARCHAR2(500)
 ,ATTRIB481 VARCHAR2(500)
 ,ATTRIB482 VARCHAR2(500)
 ,ATTRIB483 VARCHAR2(500)
 ,ATTRIB484 VARCHAR2(500)
 ,ATTRIB485 VARCHAR2(500)
 ,ATTRIB486 VARCHAR2(500)
 ,ATTRIB487 VARCHAR2(500)
 ,ATTRIB488 VARCHAR2(500)
 ,ATTRIB489 VARCHAR2(500)
 ,ATTRIB490 VARCHAR2(500)
 ,ATTRIB491 VARCHAR2(500)
 ,ATTRIB492 VARCHAR2(500)
 ,ATTRIB493 VARCHAR2(500)
 ,ATTRIB494 VARCHAR2(500)
 ,ATTRIB495 VARCHAR2(500)
 ,ATTRIB496 VARCHAR2(500)
 ,ATTRIB497 VARCHAR2(500)
 ,ATTRIB498 VARCHAR2(500)
 ,ATTRIB499 VARCHAR2(500)
 ,ATTRIB500 VARCHAR2(500)
 )
 ON COMMIT PRESERVE ROWS
/

drop TABLE NM_MRG_QUERY_MEMBERS_TEMP ;
CREATE GLOBAL TEMPORARY TABLE NM_MRG_QUERY_MEMBERS_TEMP
 (PL_ID NUMBER
 ,NE_ID_OF NUMBER
 ,BEGIN_MP NUMBER
 ,END_MP NUMBER
 ,MEASURE NUMBER
 ,INV_TYPE VARCHAR2(30)
 ,X_SECT VARCHAR2(4)
 ,PNT_OR_CONT VARCHAR2(1) NOT NULL
 ,VALUE_ID NUMBER
 ,NTE_SEQ_NO NUMBER
 )
 ON COMMIT PRESERVE ROWS
/

drop TABLE NM_MRG_QUERY_RESULTS_TEMP2 ;
CREATE GLOBAL TEMPORARY TABLE NM_MRG_QUERY_RESULTS_TEMP2
 (NE_ID NUMBER NOT NULL
 ,INV_TYPE VARCHAR2(30) NOT NULL
 ,X_SECT VARCHAR2(4)
 ,PNT_OR_CONT VARCHAR2(1) NOT NULL
 ,ATTRIB1 VARCHAR2(500)
 ,ATTRIB2 VARCHAR2(500)
 ,ATTRIB3 VARCHAR2(500)
 ,ATTRIB4 VARCHAR2(500)
 ,ATTRIB5 VARCHAR2(500)
 ,ATTRIB6 VARCHAR2(500)
 ,ATTRIB7 VARCHAR2(500)
 ,ATTRIB8 VARCHAR2(500)
 ,ATTRIB9 VARCHAR2(500)
 ,ATTRIB10 VARCHAR2(500)
 ,ATTRIB11 VARCHAR2(500)
 ,ATTRIB12 VARCHAR2(500)
 ,ATTRIB13 VARCHAR2(500)
 ,ATTRIB14 VARCHAR2(500)
 ,ATTRIB15 VARCHAR2(500)
 ,ATTRIB16 VARCHAR2(500)
 ,ATTRIB17 VARCHAR2(500)
 ,ATTRIB18 VARCHAR2(500)
 ,ATTRIB19 VARCHAR2(500)
 ,ATTRIB20 VARCHAR2(500)
 ,ATTRIB21 VARCHAR2(500)
 ,ATTRIB22 VARCHAR2(500)
 ,ATTRIB23 VARCHAR2(500)
 ,ATTRIB24 VARCHAR2(500)
 ,ATTRIB25 VARCHAR2(500)
 ,ATTRIB26 VARCHAR2(500)
 ,ATTRIB27 VARCHAR2(500)
 ,ATTRIB28 VARCHAR2(500)
 ,ATTRIB29 VARCHAR2(500)
 ,ATTRIB30 VARCHAR2(500)
 ,ATTRIB31 VARCHAR2(500)
 ,ATTRIB32 VARCHAR2(500)
 ,ATTRIB33 VARCHAR2(500)
 ,ATTRIB34 VARCHAR2(500)
 ,ATTRIB35 VARCHAR2(500)
 ,ATTRIB36 VARCHAR2(500)
 ,ATTRIB37 VARCHAR2(500)
 ,ATTRIB38 VARCHAR2(500)
 ,ATTRIB39 VARCHAR2(500)
 ,ATTRIB40 VARCHAR2(500)
 ,ATTRIB41 VARCHAR2(500)
 ,ATTRIB42 VARCHAR2(500)
 ,ATTRIB43 VARCHAR2(500)
 ,ATTRIB44 VARCHAR2(500)
 ,ATTRIB45 VARCHAR2(500)
 ,ATTRIB46 VARCHAR2(500)
 ,ATTRIB47 VARCHAR2(500)
 ,ATTRIB48 VARCHAR2(500)
 ,ATTRIB49 VARCHAR2(500)
 ,ATTRIB50 VARCHAR2(500)
 ,ATTRIB51 VARCHAR2(500)
 ,ATTRIB52 VARCHAR2(500)
 ,ATTRIB53 VARCHAR2(500)
 ,ATTRIB54 VARCHAR2(500)
 ,ATTRIB55 VARCHAR2(500)
 ,ATTRIB56 VARCHAR2(500)
 ,ATTRIB57 VARCHAR2(500)
 ,ATTRIB58 VARCHAR2(500)
 ,ATTRIB59 VARCHAR2(500)
 ,ATTRIB60 VARCHAR2(500)
 ,ATTRIB61 VARCHAR2(500)
 ,ATTRIB62 VARCHAR2(500)
 ,ATTRIB63 VARCHAR2(500)
 ,ATTRIB64 VARCHAR2(500)
 ,ATTRIB65 VARCHAR2(500)
 ,ATTRIB66 VARCHAR2(500)
 ,ATTRIB67 VARCHAR2(500)
 ,ATTRIB68 VARCHAR2(500)
 ,ATTRIB69 VARCHAR2(500)
 ,ATTRIB70 VARCHAR2(500)
 ,ATTRIB71 VARCHAR2(500)
 ,ATTRIB72 VARCHAR2(500)
 ,ATTRIB73 VARCHAR2(500)
 ,ATTRIB74 VARCHAR2(500)
 ,ATTRIB75 VARCHAR2(500)
 ,ATTRIB76 VARCHAR2(500)
 ,ATTRIB77 VARCHAR2(500)
 ,ATTRIB78 VARCHAR2(500)
 ,ATTRIB79 VARCHAR2(500)
 ,ATTRIB80 VARCHAR2(500)
 ,ATTRIB81 VARCHAR2(500)
 ,ATTRIB82 VARCHAR2(500)
 ,ATTRIB83 VARCHAR2(500)
 ,ATTRIB84 VARCHAR2(500)
 ,ATTRIB85 VARCHAR2(500)
 ,ATTRIB86 VARCHAR2(500)
 ,ATTRIB87 VARCHAR2(500)
 ,ATTRIB88 VARCHAR2(500)
 ,ATTRIB89 VARCHAR2(500)
 ,ATTRIB90 VARCHAR2(500)
 ,ATTRIB91 VARCHAR2(500)
 ,ATTRIB92 VARCHAR2(500)
 ,ATTRIB93 VARCHAR2(500)
 ,ATTRIB94 VARCHAR2(500)
 ,ATTRIB95 VARCHAR2(500)
 ,ATTRIB96 VARCHAR2(500)
 ,ATTRIB97 VARCHAR2(500)
 ,ATTRIB98 VARCHAR2(500)
 ,ATTRIB99 VARCHAR2(500)
 ,ATTRIB100 VARCHAR2(500)
 ,ATTRIB101 VARCHAR2(500)
 ,ATTRIB102 VARCHAR2(500)
 ,ATTRIB103 VARCHAR2(500)
 ,ATTRIB104 VARCHAR2(500)
 ,ATTRIB105 VARCHAR2(500)
 ,ATTRIB106 VARCHAR2(500)
 ,ATTRIB107 VARCHAR2(500)
 ,ATTRIB108 VARCHAR2(500)
 ,ATTRIB109 VARCHAR2(500)
 ,ATTRIB110 VARCHAR2(500)
 ,ATTRIB111 VARCHAR2(500)
 ,ATTRIB112 VARCHAR2(500)
 ,ATTRIB113 VARCHAR2(500)
 ,ATTRIB114 VARCHAR2(500)
 ,ATTRIB115 VARCHAR2(500)
 ,ATTRIB116 VARCHAR2(500)
 ,ATTRIB117 VARCHAR2(500)
 ,ATTRIB118 VARCHAR2(500)
 ,ATTRIB119 VARCHAR2(500)
 ,ATTRIB120 VARCHAR2(500)
 ,ATTRIB121 VARCHAR2(500)
 ,ATTRIB122 VARCHAR2(500)
 ,ATTRIB123 VARCHAR2(500)
 ,ATTRIB124 VARCHAR2(500)
 ,ATTRIB125 VARCHAR2(500)
 ,ATTRIB126 VARCHAR2(500)
 ,ATTRIB127 VARCHAR2(500)
 ,ATTRIB128 VARCHAR2(500)
 ,ATTRIB129 VARCHAR2(500)
 ,ATTRIB130 VARCHAR2(500)
 ,ATTRIB131 VARCHAR2(500)
 ,ATTRIB132 VARCHAR2(500)
 ,ATTRIB133 VARCHAR2(500)
 ,ATTRIB134 VARCHAR2(500)
 ,ATTRIB135 VARCHAR2(500)
 ,ATTRIB136 VARCHAR2(500)
 ,ATTRIB137 VARCHAR2(500)
 ,ATTRIB138 VARCHAR2(500)
 ,ATTRIB139 VARCHAR2(500)
 ,ATTRIB140 VARCHAR2(500)
 ,ATTRIB141 VARCHAR2(500)
 ,ATTRIB142 VARCHAR2(500)
 ,ATTRIB143 VARCHAR2(500)
 ,ATTRIB144 VARCHAR2(500)
 ,ATTRIB145 VARCHAR2(500)
 ,ATTRIB146 VARCHAR2(500)
 ,ATTRIB147 VARCHAR2(500)
 ,ATTRIB148 VARCHAR2(500)
 ,ATTRIB149 VARCHAR2(500)
 ,ATTRIB150 VARCHAR2(500)
 ,ATTRIB151 VARCHAR2(500)
 ,ATTRIB152 VARCHAR2(500)
 ,ATTRIB153 VARCHAR2(500)
 ,ATTRIB154 VARCHAR2(500)
 ,ATTRIB155 VARCHAR2(500)
 ,ATTRIB156 VARCHAR2(500)
 ,ATTRIB157 VARCHAR2(500)
 ,ATTRIB158 VARCHAR2(500)
 ,ATTRIB159 VARCHAR2(500)
 ,ATTRIB160 VARCHAR2(500)
 ,ATTRIB161 VARCHAR2(500)
 ,ATTRIB162 VARCHAR2(500)
 ,ATTRIB163 VARCHAR2(500)
 ,ATTRIB164 VARCHAR2(500)
 ,ATTRIB165 VARCHAR2(500)
 ,ATTRIB166 VARCHAR2(500)
 ,ATTRIB167 VARCHAR2(500)
 ,ATTRIB168 VARCHAR2(500)
 ,ATTRIB169 VARCHAR2(500)
 ,ATTRIB170 VARCHAR2(500)
 ,ATTRIB171 VARCHAR2(500)
 ,ATTRIB172 VARCHAR2(500)
 ,ATTRIB173 VARCHAR2(500)
 ,ATTRIB174 VARCHAR2(500)
 ,ATTRIB175 VARCHAR2(500)
 ,ATTRIB176 VARCHAR2(500)
 ,ATTRIB177 VARCHAR2(500)
 ,ATTRIB178 VARCHAR2(500)
 ,ATTRIB179 VARCHAR2(500)
 ,ATTRIB180 VARCHAR2(500)
 ,ATTRIB181 VARCHAR2(500)
 ,ATTRIB182 VARCHAR2(500)
 ,ATTRIB183 VARCHAR2(500)
 ,ATTRIB184 VARCHAR2(500)
 ,ATTRIB185 VARCHAR2(500)
 ,ATTRIB186 VARCHAR2(500)
 ,ATTRIB187 VARCHAR2(500)
 ,ATTRIB188 VARCHAR2(500)
 ,ATTRIB189 VARCHAR2(500)
 ,ATTRIB190 VARCHAR2(500)
 ,ATTRIB191 VARCHAR2(500)
 ,ATTRIB192 VARCHAR2(500)
 ,ATTRIB193 VARCHAR2(500)
 ,ATTRIB194 VARCHAR2(500)
 ,ATTRIB195 VARCHAR2(500)
 ,ATTRIB196 VARCHAR2(500)
 ,ATTRIB197 VARCHAR2(500)
 ,ATTRIB198 VARCHAR2(500)
 ,ATTRIB199 VARCHAR2(500)
 ,ATTRIB200 VARCHAR2(500)
 ,ATTRIB201 VARCHAR2(500)
 ,ATTRIB202 VARCHAR2(500)
 ,ATTRIB203 VARCHAR2(500)
 ,ATTRIB204 VARCHAR2(500)
 ,ATTRIB205 VARCHAR2(500)
 ,ATTRIB206 VARCHAR2(500)
 ,ATTRIB207 VARCHAR2(500)
 ,ATTRIB208 VARCHAR2(500)
 ,ATTRIB209 VARCHAR2(500)
 ,ATTRIB210 VARCHAR2(500)
 ,ATTRIB211 VARCHAR2(500)
 ,ATTRIB212 VARCHAR2(500)
 ,ATTRIB213 VARCHAR2(500)
 ,ATTRIB214 VARCHAR2(500)
 ,ATTRIB215 VARCHAR2(500)
 ,ATTRIB216 VARCHAR2(500)
 ,ATTRIB217 VARCHAR2(500)
 ,ATTRIB218 VARCHAR2(500)
 ,ATTRIB219 VARCHAR2(500)
 ,ATTRIB220 VARCHAR2(500)
 ,ATTRIB221 VARCHAR2(500)
 ,ATTRIB222 VARCHAR2(500)
 ,ATTRIB223 VARCHAR2(500)
 ,ATTRIB224 VARCHAR2(500)
 ,ATTRIB225 VARCHAR2(500)
 ,ATTRIB226 VARCHAR2(500)
 ,ATTRIB227 VARCHAR2(500)
 ,ATTRIB228 VARCHAR2(500)
 ,ATTRIB229 VARCHAR2(500)
 ,ATTRIB230 VARCHAR2(500)
 ,ATTRIB231 VARCHAR2(500)
 ,ATTRIB232 VARCHAR2(500)
 ,ATTRIB233 VARCHAR2(500)
 ,ATTRIB234 VARCHAR2(500)
 ,ATTRIB235 VARCHAR2(500)
 ,ATTRIB236 VARCHAR2(500)
 ,ATTRIB237 VARCHAR2(500)
 ,ATTRIB238 VARCHAR2(500)
 ,ATTRIB239 VARCHAR2(500)
 ,ATTRIB240 VARCHAR2(500)
 ,ATTRIB241 VARCHAR2(500)
 ,ATTRIB242 VARCHAR2(500)
 ,ATTRIB243 VARCHAR2(500)
 ,ATTRIB244 VARCHAR2(500)
 ,ATTRIB245 VARCHAR2(500)
 ,ATTRIB246 VARCHAR2(500)
 ,ATTRIB247 VARCHAR2(500)
 ,ATTRIB248 VARCHAR2(500)
 ,ATTRIB249 VARCHAR2(500)
 ,ATTRIB250 VARCHAR2(500)
 ,ATTRIB251 VARCHAR2(500)
 ,ATTRIB252 VARCHAR2(500)
 ,ATTRIB253 VARCHAR2(500)
 ,ATTRIB254 VARCHAR2(500)
 ,ATTRIB255 VARCHAR2(500)
 ,ATTRIB256 VARCHAR2(500)
 ,ATTRIB257 VARCHAR2(500)
 ,ATTRIB258 VARCHAR2(500)
 ,ATTRIB259 VARCHAR2(500)
 ,ATTRIB260 VARCHAR2(500)
 ,ATTRIB261 VARCHAR2(500)
 ,ATTRIB262 VARCHAR2(500)
 ,ATTRIB263 VARCHAR2(500)
 ,ATTRIB264 VARCHAR2(500)
 ,ATTRIB265 VARCHAR2(500)
 ,ATTRIB266 VARCHAR2(500)
 ,ATTRIB267 VARCHAR2(500)
 ,ATTRIB268 VARCHAR2(500)
 ,ATTRIB269 VARCHAR2(500)
 ,ATTRIB270 VARCHAR2(500)
 ,ATTRIB271 VARCHAR2(500)
 ,ATTRIB272 VARCHAR2(500)
 ,ATTRIB273 VARCHAR2(500)
 ,ATTRIB274 VARCHAR2(500)
 ,ATTRIB275 VARCHAR2(500)
 ,ATTRIB276 VARCHAR2(500)
 ,ATTRIB277 VARCHAR2(500)
 ,ATTRIB278 VARCHAR2(500)
 ,ATTRIB279 VARCHAR2(500)
 ,ATTRIB280 VARCHAR2(500)
 ,ATTRIB281 VARCHAR2(500)
 ,ATTRIB282 VARCHAR2(500)
 ,ATTRIB283 VARCHAR2(500)
 ,ATTRIB284 VARCHAR2(500)
 ,ATTRIB285 VARCHAR2(500)
 ,ATTRIB286 VARCHAR2(500)
 ,ATTRIB287 VARCHAR2(500)
 ,ATTRIB288 VARCHAR2(500)
 ,ATTRIB289 VARCHAR2(500)
 ,ATTRIB290 VARCHAR2(500)
 ,ATTRIB291 VARCHAR2(500)
 ,ATTRIB292 VARCHAR2(500)
 ,ATTRIB293 VARCHAR2(500)
 ,ATTRIB294 VARCHAR2(500)
 ,ATTRIB295 VARCHAR2(500)
 ,ATTRIB296 VARCHAR2(500)
 ,ATTRIB297 VARCHAR2(500)
 ,ATTRIB298 VARCHAR2(500)
 ,ATTRIB299 VARCHAR2(500)
 ,ATTRIB300 VARCHAR2(500)
 ,ATTRIB301 VARCHAR2(500)
 ,ATTRIB302 VARCHAR2(500)
 ,ATTRIB303 VARCHAR2(500)
 ,ATTRIB304 VARCHAR2(500)
 ,ATTRIB305 VARCHAR2(500)
 ,ATTRIB306 VARCHAR2(500)
 ,ATTRIB307 VARCHAR2(500)
 ,ATTRIB308 VARCHAR2(500)
 ,ATTRIB309 VARCHAR2(500)
 ,ATTRIB310 VARCHAR2(500)
 ,ATTRIB311 VARCHAR2(500)
 ,ATTRIB312 VARCHAR2(500)
 ,ATTRIB313 VARCHAR2(500)
 ,ATTRIB314 VARCHAR2(500)
 ,ATTRIB315 VARCHAR2(500)
 ,ATTRIB316 VARCHAR2(500)
 ,ATTRIB317 VARCHAR2(500)
 ,ATTRIB318 VARCHAR2(500)
 ,ATTRIB319 VARCHAR2(500)
 ,ATTRIB320 VARCHAR2(500)
 ,ATTRIB321 VARCHAR2(500)
 ,ATTRIB322 VARCHAR2(500)
 ,ATTRIB323 VARCHAR2(500)
 ,ATTRIB324 VARCHAR2(500)
 ,ATTRIB325 VARCHAR2(500)
 ,ATTRIB326 VARCHAR2(500)
 ,ATTRIB327 VARCHAR2(500)
 ,ATTRIB328 VARCHAR2(500)
 ,ATTRIB329 VARCHAR2(500)
 ,ATTRIB330 VARCHAR2(500)
 ,ATTRIB331 VARCHAR2(500)
 ,ATTRIB332 VARCHAR2(500)
 ,ATTRIB333 VARCHAR2(500)
 ,ATTRIB334 VARCHAR2(500)
 ,ATTRIB335 VARCHAR2(500)
 ,ATTRIB336 VARCHAR2(500)
 ,ATTRIB337 VARCHAR2(500)
 ,ATTRIB338 VARCHAR2(500)
 ,ATTRIB339 VARCHAR2(500)
 ,ATTRIB340 VARCHAR2(500)
 ,ATTRIB341 VARCHAR2(500)
 ,ATTRIB342 VARCHAR2(500)
 ,ATTRIB343 VARCHAR2(500)
 ,ATTRIB344 VARCHAR2(500)
 ,ATTRIB345 VARCHAR2(500)
 ,ATTRIB346 VARCHAR2(500)
 ,ATTRIB347 VARCHAR2(500)
 ,ATTRIB348 VARCHAR2(500)
 ,ATTRIB349 VARCHAR2(500)
 ,ATTRIB350 VARCHAR2(500)
 ,ATTRIB351 VARCHAR2(500)
 ,ATTRIB352 VARCHAR2(500)
 ,ATTRIB353 VARCHAR2(500)
 ,ATTRIB354 VARCHAR2(500)
 ,ATTRIB355 VARCHAR2(500)
 ,ATTRIB356 VARCHAR2(500)
 ,ATTRIB357 VARCHAR2(500)
 ,ATTRIB358 VARCHAR2(500)
 ,ATTRIB359 VARCHAR2(500)
 ,ATTRIB360 VARCHAR2(500)
 ,ATTRIB361 VARCHAR2(500)
 ,ATTRIB362 VARCHAR2(500)
 ,ATTRIB363 VARCHAR2(500)
 ,ATTRIB364 VARCHAR2(500)
 ,ATTRIB365 VARCHAR2(500)
 ,ATTRIB366 VARCHAR2(500)
 ,ATTRIB367 VARCHAR2(500)
 ,ATTRIB368 VARCHAR2(500)
 ,ATTRIB369 VARCHAR2(500)
 ,ATTRIB370 VARCHAR2(500)
 ,ATTRIB371 VARCHAR2(500)
 ,ATTRIB372 VARCHAR2(500)
 ,ATTRIB373 VARCHAR2(500)
 ,ATTRIB374 VARCHAR2(500)
 ,ATTRIB375 VARCHAR2(500)
 ,ATTRIB376 VARCHAR2(500)
 ,ATTRIB377 VARCHAR2(500)
 ,ATTRIB378 VARCHAR2(500)
 ,ATTRIB379 VARCHAR2(500)
 ,ATTRIB380 VARCHAR2(500)
 ,ATTRIB381 VARCHAR2(500)
 ,ATTRIB382 VARCHAR2(500)
 ,ATTRIB383 VARCHAR2(500)
 ,ATTRIB384 VARCHAR2(500)
 ,ATTRIB385 VARCHAR2(500)
 ,ATTRIB386 VARCHAR2(500)
 ,ATTRIB387 VARCHAR2(500)
 ,ATTRIB388 VARCHAR2(500)
 ,ATTRIB389 VARCHAR2(500)
 ,ATTRIB390 VARCHAR2(500)
 ,ATTRIB391 VARCHAR2(500)
 ,ATTRIB392 VARCHAR2(500)
 ,ATTRIB393 VARCHAR2(500)
 ,ATTRIB394 VARCHAR2(500)
 ,ATTRIB395 VARCHAR2(500)
 ,ATTRIB396 VARCHAR2(500)
 ,ATTRIB397 VARCHAR2(500)
 ,ATTRIB398 VARCHAR2(500)
 ,ATTRIB399 VARCHAR2(500)
 ,ATTRIB400 VARCHAR2(500)
 ,ATTRIB401 VARCHAR2(500)
 ,ATTRIB402 VARCHAR2(500)
 ,ATTRIB403 VARCHAR2(500)
 ,ATTRIB404 VARCHAR2(500)
 ,ATTRIB405 VARCHAR2(500)
 ,ATTRIB406 VARCHAR2(500)
 ,ATTRIB407 VARCHAR2(500)
 ,ATTRIB408 VARCHAR2(500)
 ,ATTRIB409 VARCHAR2(500)
 ,ATTRIB410 VARCHAR2(500)
 ,ATTRIB411 VARCHAR2(500)
 ,ATTRIB412 VARCHAR2(500)
 ,ATTRIB413 VARCHAR2(500)
 ,ATTRIB414 VARCHAR2(500)
 ,ATTRIB415 VARCHAR2(500)
 ,ATTRIB416 VARCHAR2(500)
 ,ATTRIB417 VARCHAR2(500)
 ,ATTRIB418 VARCHAR2(500)
 ,ATTRIB419 VARCHAR2(500)
 ,ATTRIB420 VARCHAR2(500)
 ,ATTRIB421 VARCHAR2(500)
 ,ATTRIB422 VARCHAR2(500)
 ,ATTRIB423 VARCHAR2(500)
 ,ATTRIB424 VARCHAR2(500)
 ,ATTRIB425 VARCHAR2(500)
 ,ATTRIB426 VARCHAR2(500)
 ,ATTRIB427 VARCHAR2(500)
 ,ATTRIB428 VARCHAR2(500)
 ,ATTRIB429 VARCHAR2(500)
 ,ATTRIB430 VARCHAR2(500)
 ,ATTRIB431 VARCHAR2(500)
 ,ATTRIB432 VARCHAR2(500)
 ,ATTRIB433 VARCHAR2(500)
 ,ATTRIB434 VARCHAR2(500)
 ,ATTRIB435 VARCHAR2(500)
 ,ATTRIB436 VARCHAR2(500)
 ,ATTRIB437 VARCHAR2(500)
 ,ATTRIB438 VARCHAR2(500)
 ,ATTRIB439 VARCHAR2(500)
 ,ATTRIB440 VARCHAR2(500)
 ,ATTRIB441 VARCHAR2(500)
 ,ATTRIB442 VARCHAR2(500)
 ,ATTRIB443 VARCHAR2(500)
 ,ATTRIB444 VARCHAR2(500)
 ,ATTRIB445 VARCHAR2(500)
 ,ATTRIB446 VARCHAR2(500)
 ,ATTRIB447 VARCHAR2(500)
 ,ATTRIB448 VARCHAR2(500)
 ,ATTRIB449 VARCHAR2(500)
 ,ATTRIB450 VARCHAR2(500)
 ,ATTRIB451 VARCHAR2(500)
 ,ATTRIB452 VARCHAR2(500)
 ,ATTRIB453 VARCHAR2(500)
 ,ATTRIB454 VARCHAR2(500)
 ,ATTRIB455 VARCHAR2(500)
 ,ATTRIB456 VARCHAR2(500)
 ,ATTRIB457 VARCHAR2(500)
 ,ATTRIB458 VARCHAR2(500)
 ,ATTRIB459 VARCHAR2(500)
 ,ATTRIB460 VARCHAR2(500)
 ,ATTRIB461 VARCHAR2(500)
 ,ATTRIB462 VARCHAR2(500)
 ,ATTRIB463 VARCHAR2(500)
 ,ATTRIB464 VARCHAR2(500)
 ,ATTRIB465 VARCHAR2(500)
 ,ATTRIB466 VARCHAR2(500)
 ,ATTRIB467 VARCHAR2(500)
 ,ATTRIB468 VARCHAR2(500)
 ,ATTRIB469 VARCHAR2(500)
 ,ATTRIB470 VARCHAR2(500)
 ,ATTRIB471 VARCHAR2(500)
 ,ATTRIB472 VARCHAR2(500)
 ,ATTRIB473 VARCHAR2(500)
 ,ATTRIB474 VARCHAR2(500)
 ,ATTRIB475 VARCHAR2(500)
 ,ATTRIB476 VARCHAR2(500)
 ,ATTRIB477 VARCHAR2(500)
 ,ATTRIB478 VARCHAR2(500)
 ,ATTRIB479 VARCHAR2(500)
 ,ATTRIB480 VARCHAR2(500)
 ,ATTRIB481 VARCHAR2(500)
 ,ATTRIB482 VARCHAR2(500)
 ,ATTRIB483 VARCHAR2(500)
 ,ATTRIB484 VARCHAR2(500)
 ,ATTRIB485 VARCHAR2(500)
 ,ATTRIB486 VARCHAR2(500)
 ,ATTRIB487 VARCHAR2(500)
 ,ATTRIB488 VARCHAR2(500)
 ,ATTRIB489 VARCHAR2(500)
 ,ATTRIB490 VARCHAR2(500)
 ,ATTRIB491 VARCHAR2(500)
 ,ATTRIB492 VARCHAR2(500)
 ,ATTRIB493 VARCHAR2(500)
 ,ATTRIB494 VARCHAR2(500)
 ,ATTRIB495 VARCHAR2(500)
 ,ATTRIB496 VARCHAR2(500)
 ,ATTRIB497 VARCHAR2(500)
 ,ATTRIB498 VARCHAR2(500)
 ,ATTRIB499 VARCHAR2(500)
 ,ATTRIB500 VARCHAR2(500)
 )
 ON COMMIT PRESERVE ROWS
/

drop TABLE NM_MRG_MEMBERS ;
CREATE GLOBAL TEMPORARY TABLE NM_MRG_MEMBERS
 (NM_NE_ID_IN NUMBER(38) NOT NULL
 ,NM_NE_ID_OF NUMBER(38) NOT NULL
 ,NM_BEGIN_MP NUMBER NOT NULL
 ,NM_END_MP NUMBER
 ,NM_SEQ_NO NUMBER(38)
 ,INV_TYPE VARCHAR2(4)
 ,ELEMENT_LENGTH NUMBER
 ,ROUTE_NE_ID NUMBER
 )
 ON COMMIT PRESERVE ROWS
/

COMMENT ON TABLE NM_MRG_MEMBERS IS 'This table is for Inventory merging, not for merging 2 elements'
/

drop TABLE NM_MRG_INV_ITEMS ;
CREATE GLOBAL TEMPORARY TABLE NM_MRG_INV_ITEMS
 (IIT_NE_ID NUMBER(9) NOT NULL
 ,IIT_INV_TYPE VARCHAR2(4) NOT NULL
 ,IIT_PRIMARY_KEY VARCHAR2(50) NOT NULL
 ,IIT_START_DATE DATE NOT NULL
 ,IIT_DATE_CREATED DATE NOT NULL
 ,IIT_DATE_MODIFIED DATE NOT NULL
 ,IIT_CREATED_BY VARCHAR2(30) NOT NULL
 ,IIT_MODIFIED_BY VARCHAR2(30) NOT NULL
 ,IIT_ADMIN_UNIT NUMBER(9) NOT NULL
 ,IIT_DESCR VARCHAR2(40)
 ,IIT_END_DATE DATE
 ,IIT_FOREIGN_KEY VARCHAR2(50)
 ,IIT_LOCATED_BY NUMBER(9)
 ,IIT_POSITION NUMBER
 ,IIT_X_COORD NUMBER
 ,IIT_Y_COORD NUMBER
 ,IIT_NUM_ATTRIB16 NUMBER
 ,IIT_NUM_ATTRIB17 NUMBER
 ,IIT_NUM_ATTRIB18 NUMBER
 ,IIT_NUM_ATTRIB19 NUMBER
 ,IIT_NUM_ATTRIB20 NUMBER
 ,IIT_NUM_ATTRIB21 NUMBER
 ,IIT_NUM_ATTRIB22 NUMBER
 ,IIT_NUM_ATTRIB23 NUMBER
 ,IIT_NUM_ATTRIB24 NUMBER
 ,IIT_NUM_ATTRIB25 NUMBER
 ,IIT_CHR_ATTRIB26 VARCHAR2(50)
 ,IIT_CHR_ATTRIB27 VARCHAR2(50)
 ,IIT_CHR_ATTRIB28 VARCHAR2(50)
 ,IIT_CHR_ATTRIB29 VARCHAR2(50)
 ,IIT_CHR_ATTRIB30 VARCHAR2(50)
 ,IIT_CHR_ATTRIB31 VARCHAR2(50)
 ,IIT_CHR_ATTRIB32 VARCHAR2(50)
 ,IIT_CHR_ATTRIB33 VARCHAR2(50)
 ,IIT_CHR_ATTRIB34 VARCHAR2(50)
 ,IIT_CHR_ATTRIB35 VARCHAR2(50)
 ,IIT_CHR_ATTRIB36 VARCHAR2(50)
 ,IIT_CHR_ATTRIB37 VARCHAR2(50)
 ,IIT_CHR_ATTRIB38 VARCHAR2(50)
 ,IIT_CHR_ATTRIB39 VARCHAR2(50)
 ,IIT_CHR_ATTRIB40 VARCHAR2(50)
 ,IIT_CHR_ATTRIB41 VARCHAR2(50)
 ,IIT_CHR_ATTRIB42 VARCHAR2(50)
 ,IIT_CHR_ATTRIB43 VARCHAR2(50)
 ,IIT_CHR_ATTRIB44 VARCHAR2(50)
 ,IIT_CHR_ATTRIB45 VARCHAR2(50)
 ,IIT_CHR_ATTRIB46 VARCHAR2(50)
 ,IIT_CHR_ATTRIB47 VARCHAR2(50)
 ,IIT_CHR_ATTRIB48 VARCHAR2(50)
 ,IIT_CHR_ATTRIB49 VARCHAR2(50)
 ,IIT_CHR_ATTRIB50 VARCHAR2(50)
 ,IIT_CHR_ATTRIB51 VARCHAR2(50)
 ,IIT_CHR_ATTRIB52 VARCHAR2(50)
 ,IIT_CHR_ATTRIB53 VARCHAR2(50)
 ,IIT_CHR_ATTRIB54 VARCHAR2(50)
 ,IIT_CHR_ATTRIB55 VARCHAR2(50)
 ,IIT_CHR_ATTRIB56 VARCHAR2(200)
 ,IIT_CHR_ATTRIB57 VARCHAR2(200)
 ,IIT_CHR_ATTRIB58 VARCHAR2(200)
 ,IIT_CHR_ATTRIB59 VARCHAR2(200)
 ,IIT_CHR_ATTRIB60 VARCHAR2(200)
 ,IIT_CHR_ATTRIB61 VARCHAR2(200)
 ,IIT_CHR_ATTRIB62 VARCHAR2(200)
 ,IIT_CHR_ATTRIB63 VARCHAR2(200)
 ,IIT_CHR_ATTRIB64 VARCHAR2(200)
 ,IIT_CHR_ATTRIB65 VARCHAR2(200)
 ,IIT_CHR_ATTRIB66 VARCHAR2(500)
 ,IIT_CHR_ATTRIB67 VARCHAR2(500)
 ,IIT_CHR_ATTRIB68 VARCHAR2(500)
 ,IIT_CHR_ATTRIB69 VARCHAR2(500)
 ,IIT_CHR_ATTRIB70 VARCHAR2(500)
 ,IIT_CHR_ATTRIB71 VARCHAR2(500)
 ,IIT_CHR_ATTRIB72 VARCHAR2(500)
 ,IIT_CHR_ATTRIB73 VARCHAR2(500)
 ,IIT_CHR_ATTRIB74 VARCHAR2(500)
 ,IIT_CHR_ATTRIB75 VARCHAR2(500)
 ,IIT_NUM_ATTRIB76 NUMBER
 ,IIT_NUM_ATTRIB77 NUMBER
 ,IIT_NUM_ATTRIB78 NUMBER
 ,IIT_NUM_ATTRIB79 NUMBER
 ,IIT_NUM_ATTRIB80 NUMBER
 ,IIT_NUM_ATTRIB81 NUMBER
 ,IIT_NUM_ATTRIB82 NUMBER
 ,IIT_NUM_ATTRIB83 NUMBER
 ,IIT_NUM_ATTRIB84 NUMBER
 ,IIT_NUM_ATTRIB85 NUMBER
 ,IIT_DATE_ATTRIB86 DATE
 ,IIT_DATE_ATTRIB87 DATE
 ,IIT_DATE_ATTRIB88 DATE
 ,IIT_DATE_ATTRIB89 DATE
 ,IIT_DATE_ATTRIB90 DATE
 ,IIT_DATE_ATTRIB91 DATE
 ,IIT_DATE_ATTRIB92 DATE
 ,IIT_DATE_ATTRIB93 DATE
 ,IIT_DATE_ATTRIB94 DATE
 ,IIT_DATE_ATTRIB95 DATE
 ,IIT_ANGLE NUMBER(6,2)
 ,IIT_ANGLE_TXT VARCHAR2(20)
 ,IIT_CLASS VARCHAR2(2)
 ,IIT_CLASS_TXT VARCHAR2(20)
 ,IIT_COLOUR VARCHAR2(2)
 ,IIT_COLOUR_TXT VARCHAR2(20)
 ,IIT_COORD_FLAG VARCHAR2(1)
 ,IIT_DESCRIPTION VARCHAR2(40)
 ,IIT_DIAGRAM VARCHAR2(6)
 ,IIT_DISTANCE NUMBER(7,2)
 ,IIT_END_CHAIN NUMBER(6)
 ,IIT_GAP NUMBER(6,2)
 ,IIT_HEIGHT NUMBER(6,2)
 ,IIT_HEIGHT_2 NUMBER(6,2)
 ,IIT_ID_CODE VARCHAR2(8)
 ,IIT_INSTAL_DATE DATE
 ,IIT_INVENT_DATE DATE
 ,IIT_INV_OWNERSHIP VARCHAR2(4)
 ,IIT_ITEMCODE VARCHAR2(8)
 ,IIT_LCO_LAMP_CONFIG_ID NUMBER(3)
 ,IIT_LENGTH NUMBER(6)
 ,IIT_MATERIAL VARCHAR2(30)
 ,IIT_MATERIAL_TXT VARCHAR2(20)
 ,IIT_METHOD VARCHAR2(2)
 ,IIT_METHOD_TXT VARCHAR2(20)
 ,IIT_NOTE VARCHAR2(40)
 ,IIT_NO_OF_UNITS NUMBER(3)
 ,IIT_OPTIONS VARCHAR2(2)
 ,IIT_OPTIONS_TXT VARCHAR2(20)
 ,IIT_OUN_ORG_ID_ELEC_BOARD NUMBER(8)
 ,IIT_OWNER VARCHAR2(4)
 ,IIT_OWNER_TXT VARCHAR2(20)
 ,IIT_PEO_INVENT_BY_ID NUMBER(8)
 ,IIT_PHOTO VARCHAR2(6)
 ,IIT_POWER NUMBER(6)
 ,IIT_PROV_FLAG VARCHAR2(1)
 ,IIT_REV_BY VARCHAR2(20)
 ,IIT_REV_DATE DATE
 ,IIT_TYPE VARCHAR2(2)
 ,IIT_TYPE_TXT VARCHAR2(20)
 ,IIT_WIDTH NUMBER(6,2)
 ,IIT_XTRA_CHAR_1 VARCHAR2(20)
 ,IIT_XTRA_DATE_1 DATE
 ,IIT_XTRA_DOMAIN_1 VARCHAR2(2)
 ,IIT_XTRA_DOMAIN_TXT_1 VARCHAR2(20)
 ,IIT_XTRA_NUMBER_1 NUMBER(10,2)
 ,IIT_X_SECT VARCHAR2(4)
 ,IIT_DET_XSP VARCHAR2(4)
 ,IIT_OFFSET NUMBER
 ,IIT_X NUMBER
 ,IIT_Y NUMBER
 ,IIT_Z NUMBER
 ,IIT_NUM_ATTRIB96 NUMBER
 ,IIT_NUM_ATTRIB97 NUMBER
 ,IIT_NUM_ATTRIB98 NUMBER
 ,IIT_NUM_ATTRIB99 NUMBER
 ,IIT_NUM_ATTRIB100 NUMBER
 ,IIT_NUM_ATTRIB101 NUMBER
 ,IIT_NUM_ATTRIB102 NUMBER
 ,IIT_NUM_ATTRIB103 NUMBER
 ,IIT_NUM_ATTRIB104 NUMBER
 ,IIT_NUM_ATTRIB105 NUMBER
 ,IIT_NUM_ATTRIB106 NUMBER
 ,IIT_NUM_ATTRIB107 NUMBER
 ,IIT_NUM_ATTRIB108 NUMBER
 ,IIT_NUM_ATTRIB109 NUMBER
 ,IIT_NUM_ATTRIB110 NUMBER
 ,IIT_NUM_ATTRIB111 NUMBER
 ,IIT_NUM_ATTRIB112 NUMBER
 ,IIT_NUM_ATTRIB113 NUMBER
 ,IIT_NUM_ATTRIB114 NUMBER
 ,IIT_NUM_ATTRIB115 NUMBER
 ,NQT_SEQ_NO NUMBER NOT NULL
 ,PNT_OR_CONT VARCHAR2(1) NOT NULL
 )
 ON COMMIT PRESERVE ROWS
/

COMMENT ON TABLE NM_MRG_INV_ITEMS IS 'Temporary table'
/

drop TABLE NM_MRG_MEMBERS2 ;
CREATE GLOBAL TEMPORARY TABLE NM_MRG_MEMBERS2
 (NM_NE_ID_IN NUMBER(38) NOT NULL
 ,NM_NE_ID_OF NUMBER(38) NOT NULL
 ,NM_BEGIN_MP NUMBER NOT NULL
 ,NM_END_MP NUMBER
 ,NM_SEQ_NO NUMBER(38)
 ,INV_TYPE VARCHAR2(4)
 ,ELEMENT_LENGTH NUMBER
 ,ROUTE_NE_ID NUMBER
 )
 ON COMMIT PRESERVE ROWS
/

COMMENT ON TABLE NM_MRG_MEMBERS2 IS 'This table is for Inventory merging, not for merging 2 elements'
/

ALTER TABLE NM_MRG_QUERY_RESULTS_TEMP2
 ADD (CONSTRAINT NMQRT2_PK PRIMARY KEY 
  (NE_ID)
  DISABLE)
/

CREATE INDEX NMQRT2_NE_ID_TYPE ON NM_MRG_QUERY_RESULTS_TEMP2
 (NE_ID
 ,INV_TYPE)
/

ALTER TABLE NM_MRG_INV_ITEMS
 ADD (CONSTRAINT NM_MRG_INV_ITEMS_PK PRIMARY KEY 
  (IIT_NE_ID))
/


ALTER TABLE NM_MRG_MEMBERS2
 ADD (CONSTRAINT NMM2_UK UNIQUE 
  (NM_NE_ID_IN
  ,NM_NE_ID_OF
  ,NM_BEGIN_MP
  ,NM_END_MP
  ,NM_SEQ_NO))
/

CREATE INDEX NMQRT_IX ON NM_MRG_QUERY_RESULTS_TEMP
 (INV_TYPE)
/

CREATE INDEX NMQRT_IX4 ON NM_MRG_QUERY_RESULTS_TEMP
 (NE_ID)
/

CREATE INDEX NMQMT_IX ON NM_MRG_QUERY_MEMBERS_TEMP
 (NE_ID_OF
 ,BEGIN_MP
 ,END_MP)
/

CREATE INDEX NM_MRG_MEMBERS_IX ON NM_MRG_MEMBERS
 (NM_NE_ID_IN)
/

CREATE INDEX NM_MRG_MEMBERS_IX3 ON NM_MRG_MEMBERS
 (INV_TYPE)
/

CREATE INDEX NM_MRG_MEMBERS_IX2 ON NM_MRG_MEMBERS
 (NM_NE_ID_OF)
/

CREATE INDEX NM_MRG_INV_ITEMS_IX ON NM_MRG_INV_ITEMS
 (IIT_INV_TYPE
 ,IIT_X_SECT)
/

-- End of PMS logs 703952/704320
-----------------------------------------------------------------------------

-----------------------------------------------------------------------------
-- Start of log 704541 - remove trigger that duplicates a cascade trigger
-- and causes mutating table error 
BEGIN
        execute immediate ('drop trigger nm_types_del_nlt_trg');
EXCEPTION
 WHEN others THEN
   Null;
END;   
/
--
-- End of log 704541 
-----------------------------------------------------------------------------

-- CP 28/04/2006
ALTER TABLE NM_INV_TYPE_ROLES ADD (CONSTRAINT
 ITR_HRO_FK FOREIGN KEY 
  (ITR_HRO_ROLE) REFERENCES HIG_ROLES
  (HRO_ROLE))
/



CREATE OR REPLACE FORCE VIEW network_node
(
     rse_he_id
    ,rse_unique
    ,rse_descr
    ,rse_admin_unit
    ,rse_sys_flag
    ,rse_length
    ,st_chain
    ,end_chain
)
AS SELECT
       RSE_HE_ID
     , RSE_UNIQUE
     , RSE_DESCR
     , RSE_ADMIN_UNIT
     , RSE_SYS_FLAG
     , RSE_LENGTH
     , NOU1.NOU_CHAINAGE ST_CHAIN
     , NOU2.NOU_CHAINAGE END_CHAIN
 FROM ROAD_SECTIONS,
       NODE_USAGES NOU1,
       NODE_USAGES NOU2
  WHERE RSE_HE_ID = NOU1.NOU_RSE_HE_ID (+)
    AND RSE_HE_ID = NOU2.NOU_RSE_HE_ID (+)
    AND RSE_PUS_NODE_ID_ST = NOU1.NOU_PUS_NODE_ID (+)
    AND RSE_PUS_NODE_ID_END = NOU2.NOU_PUS_NODE_ID (+)
  and nou1.nou_node_type (+) = 'S' and nou2.nou_node_type (+) = 'E'
;

COMMENT ON TABLE network_node
    IS ' - Retrofitted';


-----------------------------------------------------------------------------
-- Start of new table changes for MA - CP 31/05/2006 Added
--
CREATE TABLE NM_SPECIAL_CHARS
 (NSCH_ASCII_CHARACTER NUMBER(3) NOT NULL
 )
/

ALTER TABLE NM_SPECIAL_CHARS
 ADD (CONSTRAINT NSCH_PK PRIMARY KEY 
  (NSCH_ASCII_CHARACTER))
/
--
-- End of table changes for MA
-----------------------------------------------------------------------------

-- CP 01/06/2006
DROP VIEW FRM45_ENABLED_ROLES
/


-----------------------------------------------------------------------------
-- GJ Start of rescale changes 
-- To allow temp extent where same ne id appears more than once i.e. extent where asset is located on 
-- same datum more than once to be rescalednew table changes for 
--
DROP INDEX RSCR
/
CREATE INDEX RSCR ON NM_RESCALE_READ
(NE_ID)
/
DROP INDEX RSCW
/
CREATE INDEX RSCW ON NM_RESCALE_WRITE
(NE_ID)
/

-- GJ End of rescale changes 
-----------------------------------------------------------------------------

-----------------------------------------------------------------------------
-- Start of new objects for AE - CP 04/07/2006 Added
--

CREATE TABLE NM_LAYER_TREE
 (NLTR_PARENT VARCHAR2(100) NOT NULL
 ,NLTR_CHILD VARCHAR2(100) NOT NULL
 ,NLTR_DESCR VARCHAR2(250) NOT NULL
 ,NLTR_TYPE VARCHAR2(1) NOT NULL
 ,NLTR_ORDER NUMBER
 )
/

ALTER TABLE NM_LAYER_TREE
 ADD (CONSTRAINT NLTR_PK PRIMARY KEY 
  (NLTR_CHILD))
/

ALTER TABLE NM_LAYER_TREE
 ADD (CONSTRAINT NLTR_TYPE_CHK CHECK (nltr_type IN ('F','M')))
/

ALTER TABLE NM_LAYER_TREE
 ADD (CONSTRAINT NLTR_PARENT_CHILD_CHK CHECK (nltr_parent != nltr_child))
/

-- End of AE changes 
-----------------------------------------------------------------------------

-----------------------------------------------------------------------------
-- GJ 14-JUL-2006
-- Drop procedures introduced as a stop-gap measure to minimise impact
-- These have all been productised in nm3lock package at this release
--

BEGIN
 execute immediate ('DROP PROCEDURE lock_asset_item');
EXCEPTION
 WHEN others THEN 
   Null;
END; 
/
BEGIN
 execute immediate ('DROP PROCEDURE lock_element');
EXCEPTION
 WHEN others THEN 
   Null;
END;
/
BEGIN
 execute immediate ('DROP PROCEDURE lock_inv_item');
EXCEPTION
 WHEN others THEN 
   Null;
END;
/
--
-- End of GJ changes
-----------------------------------------------------------------------------

-----------------------------------------------------------------------------
-- Start of Test Manager fix 22202 (GJ)
--
-- clear out table before we start (by rights it should be empty anyway)
--
truncate table nm_reclass_details
/

alter table nm_reclass_details
modify (nrd_old_ne_id NUMBER(9))
/

alter table nm_reclass_details
modify (nrd_new_ne_id NUMBER(9))
/
--
-- End of Test Manager fix 22202 (GJ)
-----------------------------------------------------------------------------

-----------------------------------------------------------------------------
-- Start of Test Manager fix 36505 (AE)
--
-- Add indexes to SDO tables
--
DECLARE
   CURSOR c1
   IS
      SELECT nth_theme_id, nth_feature_table
        FROM nm_themes_all
       WHERE EXISTS (
                SELECT 1
                  FROM user_tab_columns c, user_tables t
                 WHERE nth_feature_table = t.table_name
                   AND t.table_name = c.table_name
                   AND c.column_name = 'NE_ID_OF');
BEGIN
   FOR irec IN c1
   LOOP
      BEGIN
         EXECUTE IMMEDIATE    'create index '
                           || irec.nth_feature_table
                           || '_NW_IDX'
                           || ' on '
                           || irec.nth_feature_table
                           || ' ( ne_id_of, nm_begin_mp )';
      EXCEPTION
        WHEN OTHERS
        THEN NULL;
      END;
   END LOOP;
END;
/
--
-- End of Test Manager fix 36505 (AE)
-----------------------------------------------------------------------------


-----------------------------------------------------------------------------
-- Changes to support performance of node snapping (RC)
--
CREATE GLOBAL TEMPORARY TABLE nm_nodes_at_xy_tmp
( no_node_id NUMBER
, no_node_name VARCHAR2(30)
, no_np_id NUMBER )
ON COMMIT PRESERVE ROWS
/
CREATE INDEX NNU_NO_NE_IDX 
ON NM_NODE_USAGES_ALL
(NNU_NO_NODE_ID, NNU_NE_ID)
/
--
-- Changes to support performance of node snapping (RC)
-----------------------------------------------------------------------------



-----------------------------------------------------------------------------
-- GJ
-- tables to support NM0575 module
--
CREATE GLOBAL TEMPORARY TABLE NM0575_EVENT_LOG
(
  LOG_IIT_INV_TYPE     VARCHAR2(4),
  LOG_ACTION           VARCHAR2(1)         NOT NULL,
  LOG_IIT_NE_ID        NUMBER              NOT NULL,
  LOG_IIT_PRIMARY_KEY  VARCHAR2(50),
  LOG_IIT_DESCR        VARCHAR2(40),
  LOG_MESSAGE          VARCHAR2(500),
  LOG_ERROR_FLAG       VARCHAR2(1)         NOT NULL
)
ON COMMIT PRESERVE ROWS
NOCACHE;


ALTER TABLE NM0575_EVENT_LOG ADD (
  CONSTRAINT NM0575_EVENT_LOG_PK
 PRIMARY KEY
 (LOG_IIT_NE_ID));
--
------
-- 
 CREATE GLOBAL TEMPORARY TABLE NM0575_POSSIBLE_XSPS
(
  XSP_VALUE            VARCHAR2(4)         NOT NULL,
  XSP_DESCR            VARCHAR2(80),
  XSP_RESTRAINT_COUNT  NUMBER              NOT NULL,
  XSP_SELECTED         VARCHAR2(1)         DEFAULT 'N'                   NOT NULL
)
ON COMMIT PRESERVE ROWS
NOCACHE;


ALTER TABLE NM0575_POSSIBLE_XSPS ADD (
  CONSTRAINT NM0575_POSSIBLE_XSPS_PK
 PRIMARY KEY
 (XSP_VALUE));

-- GJ
-- tables to support NM0575 module
----------------------------------------------------------------------------------


---------------------------------------------------------------------------------------------------
--                        ****************   END OF SCRIPT   *******************







